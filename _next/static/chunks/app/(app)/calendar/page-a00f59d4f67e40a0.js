(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{13813:(e,t,a)=>{Promise.resolve().then(a.bind(a,57511))},14636:(e,t,a)=>{"use strict";a.d(t,{AM:()=>i,Wv:()=>o,hl:()=>d});var r=a(95155),s=a(12115),n=a(20547),l=a(59434);let i=n.bL,o=n.l9,d=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:i=4,...o}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsx)(n.UC,{ref:t,align:s,sideOffset:i,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});d.displayName=n.UC.displayName},17759:(e,t,a)=>{"use strict";a.d(t,{C5:()=>g,MJ:()=>h,eI:()=>p,lR:()=>x,lV:()=>d,zB:()=>u});var r=a(95155),s=a(12115),n=a(99708),l=a(62177),i=a(59434),o=a(85057);let d=l.Op,c=s.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(l.xI,{...t})})},m=()=>{let e=s.useContext(c),t=s.useContext(f),{getFieldState:a,formState:r}=(0,l.xW)(),n=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},f=s.createContext({}),p=s.forwardRef((e,t)=>{let{className:a,...n}=e,l=s.useId();return(0,r.jsx)(f.Provider,{value:{id:l},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",a),...n})})});p.displayName="FormItem";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:n,formItemId:l}=m();return(0,r.jsx)(o.J,{ref:t,className:(0,i.cn)(n&&"text-destructive",a),htmlFor:l,...s})});x.displayName="FormLabel";let h=s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:l,formDescriptionId:i,formMessageId:o}=m();return(0,r.jsx)(n.DX,{ref:t,id:l,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...a})});h.displayName="FormControl",s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:n}=m();return(0,r.jsx)("p",{ref:t,id:n,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})}).displayName="FormDescription";let g=s.forwardRef((e,t)=>{var a;let{className:s,children:n,...l}=e,{error:o,formMessageId:d}=m(),c=o?String(null!=(a=null==o?void 0:o.message)?a:""):n;return c?(0,r.jsx)("p",{ref:t,id:d,className:(0,i.cn)("text-sm font-medium text-destructive",s),...l,children:c}):null});g.displayName="FormMessage"},26126:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(95155);a(12115);var s=a(74466),n=a(59434);let l=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...s})}},30645:(e,t,a)=>{"use strict";a.d(t,{b:()=>l});let r={maxAttempts:4,delayMs:1e3,shouldRetry:e=>!!e&&"object"==typeof e&&!(!0===e.isAbort||"string"==typeof e.message&&e.message.toLowerCase().includes("aborted"))&&!0!==e.isCircuitOpenError&&!0!==e.circuitJustOpened&&(0===e.status||502===e.status||503===e.status||504===e.status),context:"operation"};var s=function(e){return e.Closed="CLOSED",e.Open="OPEN",e.HalfOpen="HALF_OPEN",e}(s||{});let n=new Map;async function l(e,t){let a,s={...r,...t},l=s.context,i=(e,t)=>{let a="[withRetry:".concat(l,"] ").concat(e,". Circuit: ").concat(o.state,".");console.warn(a);let r=Error(a);throw r.isAbort=!0,r.context=l,t&&(r.originalError=t),r};n.has(l)||n.set(l,{state:"CLOSED",failures:0});let o=n.get(l);if("OPEN"===o.state)if(Date.now()<(o.openUntil||0)){let e=Error("Circuit for '".concat(l,"' is open due to repeated failures. Please try again in a few moments."));throw e.isCircuitOpenError=!0,e.context=l,e.openUntil=o.openUntil,e}else o.state="HALF_OPEN",o.failures=0,o.openUntil=void 0,console.log("[withRetry:".concat(l,"] Circuit is now HalfOpen. Allowing one attempt."));let d="HALF_OPEN"===o.state?1:s.maxAttempts;for(let t=1;t<=d;t++){var c,u,m;(null==(c=s.signal)?void 0:c.aborted)&&i("Aborted before attempt ".concat(t));try{let t=await e();return("HALF_OPEN"===o.state||o.failures>0||"OPEN"===o.state)&&(console.log("[withRetry:".concat(l,"] Circuit is now Closed due to successful attempt (was ").concat(o.state,").")),o.state="CLOSED",o.failures=0,o.openUntil=void 0),t}catch(e){if(a=e,(null==(u=s.signal)?void 0:u.aborted)&&i("Aborted during/after attempt ".concat(t," (caught error: ").concat((null==e?void 0:e.message)||e,")"),e),e&&"object"==typeof e&&(!0===e.isAbort||"string"==typeof e.message&&e.message.toLowerCase().includes("aborted")))throw console.warn("[withRetry:".concat(l,"] Caught abort-like error on attempt ").concat(t,": ").concat(e.message,". Circuit: ").concat(o.state,".")),e.isAbort||(e.isAbort=!0),e.context||(e.context=l),e;if(s.shouldRetry(e))if(s.onRetry&&s.onRetry(t,d,e),t<d){let e="HALF_OPEN"===o.state?s.delayMs:s.delayMs*Math.pow(2,t-1);await new Promise(t=>setTimeout(t,e)),(null==(m=s.signal)?void 0:m.aborted)&&i("Aborted during retry delay after attempt ".concat(t))}else throw console.warn("[withRetry:".concat(l,"] All ").concat(d," attempts failed (Circuit: ").concat(o.state,"). Last error: ").concat(e.message||JSON.stringify(e))),"HALF_OPEN"===o.state?(console.warn("[withRetry:".concat(l,"] Circuit failed in HalfOpen state. Re-opening.")),o.state="OPEN",o.openUntil=Date.now()+3e4,a.circuitJustOpened=!0,a.context=l):"CLOSED"===o.state&&(o.failures++,console.log("[withRetry:".concat(l,"] Circuit failure count: ").concat(o.failures," (max: ").concat(1,")")),o.failures>=1&&(console.warn("[withRetry:".concat(l,"] Circuit reached max failures. Opening circuit.")),o.state="OPEN",o.openUntil=Date.now()+3e4,a.circuitJustOpened=!0,a.context=l)),a;else throw e}}if(a)throw a;throw Error("[withRetry:".concat(l,"] Unexpected exit: Max attempts ").concat(d," reached without success or explicit error handling."))}},47262:(e,t,a)=>{"use strict";a.d(t,{S:()=>o});var r=a(95155),s=a(12115),n=a(76981),l=a(10518),i=a(59434);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.bL,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...s,children:(0,r.jsx)(n.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})})});o.displayName=n.bL.displayName},54165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>f,Es:()=>x,HM:()=>u,L3:()=>h,c7:()=>p,lG:()=>o,rr:()=>g,zM:()=>d});var r=a(95155),s=a(12115),n=a(15452),l=a(25318),i=a(59434);let o=n.bL,d=n.l9,c=n.ZL,u=n.bm,m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});m.displayName=n.hJ.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[s,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.UC.displayName;let p=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};p.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});h.displayName=n.hE.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});g.displayName=n.VY.displayName},57511:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eT});var r=a(95155),s=a(85511),n=a(66695),l=a(12115),i=a(73168),o=a(76959),d=a(80644),c=a(86622),u=a(44861),m=a(70831),f=a(3567),p=a(39140),x=a(6918),h=a(19164),g=a(34548),y=a(65119),v=a(74641),w=a(30285),b=a(59576),j=a(30645),N=a(73835);let D=e=>({id:e.id,title:e.title,startDate:e.startDate,endDate:e.dueDate,description:e.description,status:e.status,userId:e.userId,task_type:e.task_type,created:e.created?new Date(e.created):new Date,updated:e.updated?new Date(e.updated):new Date,collectionId:e.collectionId,collectionName:e.collectionName,expand:e.expand,assignedTo_text:e.assignedTo_text,priority:e.priority,progress:e.progress}),C=e=>({id:e.id,title:e.title||"",task_type:e.task_type,description:e.description,status:e.status,priority:e.priority,startDate:e.startDate?new Date(e.startDate):void 0,dueDate:e.dueDate?new Date(e.dueDate):void 0,assignedTo_text:e.assignedTo_text,recurrence:e.recurrence||"None",attachments:e.attachments,userId:e.userId,created:new Date(e.created),updated:new Date(e.updated),collectionId:e.collectionId,collectionName:e.collectionName,expand:e.expand,progress:e.progress,isMilestone:"boolean"==typeof e.isMilestone&&e.isMilestone,dependencies:Array.isArray(e.dependencies)?e.dependencies:"string"==typeof e.dependencies&&e.dependencies.startsWith("[")?JSON.parse(e.dependencies):[],instrument_subtype:e.instrument_subtype||void 0,method:e.method||void 0}),A=async(e,t)=>{try{let{signal:a,projectionHorizon:r,...s}=t||{},n={filter:'startDate != null && startDate != "" && dueDate != null && dueDate != ""',sort:"-dueDate",fields:"id,title,task_type,dueDate,description,status,userId,created,updated,recurrence,startDate,priority,progress,isMilestone,dependencies,instrument_subtype,method,assignedTo_text",...s},l=(await (0,j.b)(()=>e.collection("tasks").getFullList(n,{signal:a}),{...t,context:"fetching tasks for calendar"})).map(C);return(r?(0,N.w)(l,r):l).map(D).filter(e=>e.startDate&&e.endDate)}catch(e){throw e}};var k=a(7140);let P="personal_events",E=(e,t)=>{if(e instanceof k.fp){var a;if(404===e.status)throw Error("Cannot create item: The '".concat(t,"' collection does not exist. Please create it in your PocketBase admin panel."));if(400===e.status&&(null==(a=e.data)?void 0:a.data)){if(e.data.data.id&&e.data.data.id.message)throw Error("There seems to be a configuration issue with your '".concat(t,"' collection. The server is asking for an 'id', which should be automatically generated. Please check in your PocketBase admin panel that the 'id' field is the default system field and not a required text field you created."));let a=Object.entries(e.data.data).map(e=>{let[t,a]=e;return"".concat(t,": ").concat(a.message)}).join("; ");throw Error("Validation failed. Server says: ".concat(a))}}throw console.error("Failed to create item in ".concat(t,":"),e),e},T=(e,t)=>{var a;let r=e.startDate?new Date(e.startDate):null,s=e.endDate?new Date(e.endDate):null;if(!r||!s||!(0,u.f)(r)||!(0,u.f)(s))return console.warn("[personalEventService] Skipping event with ID ".concat(e.id," due to missing or invalid dates.")),null;let n=null==(a=e.expand)?void 0:a.userId,l=!n||n.id===t;return{id:e.id,title:e.title,startDate:r,endDate:s,description:e.description,userId:e.userId,isAllDay:e.isAllDay||!1,eventType:e.eventType||"Available",created:new Date(e.created),updated:new Date(e.updated),collectionId:e.collectionId,collectionName:e.collectionName,ownerId:null==n?void 0:n.id,ownerName:l||null==n?void 0:n.name}},M=async(e,t,a)=>{if(!t)return console.warn("[personalEventService] getPersonalEvents called without a userId. Returning empty array to protect privacy."),[];try{let{signal:r,...s}=a||{},n={sort:"startDate",expand:"userId",...s};return(await (0,j.b)(()=>e.collection(P).getFullList(n,{signal:r}),{...a,context:"fetching personal events"})).map(e=>T(e,t)).filter(e=>null!==e)}catch(e){if(e instanceof k.fp&&404===e.status)return console.warn("[personalEventService] The '".concat(P,"' collection was not found. Returning empty array. Please create it in PocketBase.")),[];throw e}},R=async(e,t)=>{try{let a=await e.collection(P).create(t),r=T(a,t.userId);if(!r)throw Error("Failed to process the created event record.");return r}catch(e){throw E(e,P),e}},S=async(e,t,a)=>{try{let r=await (0,j.b)(()=>e.collection(P).update(t,a),{context:"updating personal event ".concat(t)}),s=T(r,r.userId);if(!s)throw Error("Failed to process the updated event record.");return s}catch(e){throw console.error("Failed to update personal event ".concat(t,":"),e),E(e,P),e}},O=async(e,t)=>{try{await (0,j.b)(()=>e.collection(P).delete(t),{context:"deleting personal event ".concat(t)})}catch(e){if(console.error("Failed to delete personal event ".concat(t,":"),e),e instanceof k.fp&&404===e.status)return void console.warn("Attempted to delete non-existent personal event ".concat(t));throw e}};var I=a(87481),_=a(90245),L=a(50172),F=a(31949),z=a(965),B=a(73158),G=a(9572),H=a(59434),J=a(60704);let V=J.bL,U=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(J.B8,{ref:t,className:(0,H.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});U.displayName=J.B8.displayName;let q=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(J.l9,{ref:t,className:(0,H.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});q.displayName=J.l9.displayName,l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(J.UC,{ref:t,className:(0,H.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})}).displayName=J.UC.displayName;var $=a(54165),W=a(62177),Y=a(90221),Z=a(55594),X=a(17759),K=a(62523),Q=a(88539),ee=a(59409),et=a(14636),ea=a(47262),er=a(51920),es=a(77223),en=a(59119),el=a(36506),ei=a(15667),eo=a(87679),ed=a(91950);let ec=Z.Ik({title:Z.Yj().min(2,{message:"Title must be at least 2 characters."}),description:Z.Yj().optional(),eventDate:Z.p6({required_error:"An event date is required."}),isAllDay:Z.zM().optional(),startTime:Z.Yj().optional(),endTime:Z.Yj().optional(),eventType:Z.Yj().default("Available")}).superRefine((e,t)=>{!e.isAllDay&&(e.startTime||t.addIssue({code:"custom",message:"Start time is required for timed events.",path:["startTime"]}),e.endTime||t.addIssue({code:"custom",message:"End time is required for timed events.",path:["endTime"]}),e.startTime&&e.endTime&&e.endTime<=e.startTime&&t.addIssue({code:"custom",message:"End time must be after start time.",path:["endTime"]}))}),eu=e=>{let[t,a]=e.split(":").map(Number),r=new Date;return r.setHours(t,a),(0,i.GP)(r,"h:mm a")},em=(()=>{let e=[];for(let t=7;t<=16;t++)e.push("".concat(String(t).padStart(2,"0"),":00")),t<16&&e.push("".concat(String(t).padStart(2,"0"),":30"));return e})();function ef(e){let{onTaskCreated:t,onDialogClose:a,onDelete:n,defaultDate:o,eventToEdit:d}=e,{pbClient:c,user:u}=(0,b.A)(),{toast:m}=(0,I.dj)(),[f,p]=(0,l.useState)(!1),x=!!d,h=o?(0,el.q)(o):9,g=(0,ei.h)(o||new Date,{hours:h,minutes:0,seconds:0,milliseconds:0}),y=(0,i.GP)(g,"HH:mm"),v=(0,i.GP)((0,eo.L)(g,1),"HH:mm"),j=(0,W.mN)({resolver:(0,Y.u)(ec),defaultValues:{title:(null==d?void 0:d.title)||"",description:(null==d?void 0:d.description)||"",eventType:(null==d?void 0:d.eventType)||"Available",eventDate:d?new Date(d.startDate):o,isAllDay:(null==d?void 0:d.isAllDay)||!1,startTime:d&&!d.isAllDay?(0,i.GP)(new Date(d.startDate),"HH:mm"):y,endTime:d&&!d.isAllDay?(0,i.GP)(new Date(d.endDate),"HH:mm"):v}}),N=j.watch("isAllDay");async function D(e){let r,s;if(!c||!u)return void m({title:"Error",description:"You must be logged in.",variant:"destructive"});if(p(!0),e.isAllDay)r=(0,ei.h)(e.eventDate,{hours:7,minutes:0,seconds:0}),s=(0,ei.h)(e.eventDate,{hours:16,minutes:0,seconds:0});else{let[t,a]=e.startTime.split(":").map(Number),[n,l]=e.endTime.split(":").map(Number);r=(0,ei.h)(e.eventDate,{hours:t,minutes:a,seconds:0}),s=(0,ei.h)(e.eventDate,{hours:n,minutes:l,seconds:0})}try{if(x){let t={title:e.title,description:e.description,startDate:r,endDate:s,isAllDay:e.isAllDay,eventType:e.eventType};await S(c,d.id,t),m({title:"Success",description:"Personal event updated."})}else{let t={title:e.title,description:e.description,startDate:r,endDate:s,userId:u.id,isAllDay:e.isAllDay,eventType:e.eventType};await R(c,t),m({title:"Success",description:"Personal event added to your calendar."})}t(),a()}catch(e){m({title:"Error ".concat(x?"Updating":"Creating"," Event"),description:e.message||"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{p(!1)}}return(0,r.jsx)(X.lV,{...j,children:(0,r.jsxs)("form",{onSubmit:j.handleSubmit(D),className:"space-y-4",children:[(0,r.jsx)(X.zB,{control:j.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(X.eI,{children:[(0,r.jsx)(X.lR,{children:"Event Title"}),(0,r.jsx)(X.MJ,{children:(0,r.jsx)(K.p,{placeholder:"e.g., Team sync meeting",...t})}),(0,r.jsx)(X.C5,{})]})}}),(0,r.jsx)(X.zB,{control:j.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(X.eI,{children:[(0,r.jsx)(X.lR,{children:"Description (Optional)"}),(0,r.jsx)(X.MJ,{children:(0,r.jsx)(Q.T,{placeholder:"Add more details...",...t})}),(0,r.jsx)(X.C5,{})]})}}),(0,r.jsx)(X.zB,{control:j.control,name:"eventType",render:e=>{let{field:t}=e;return(0,r.jsxs)(X.eI,{children:[(0,r.jsx)(X.lR,{children:"Show As"}),(0,r.jsxs)(ee.l6,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(X.MJ,{children:(0,r.jsx)(ee.bq,{children:(0,r.jsx)(ee.yv,{placeholder:"Select event type"})})}),(0,r.jsx)(ee.gC,{children:ed.Y$.map(e=>(0,r.jsx)(ee.eb,{value:e,children:e},e))})]}),(0,r.jsx)(X.C5,{})]})}}),(0,r.jsx)(X.zB,{control:j.control,name:"eventDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(X.eI,{className:"flex flex-col",children:[(0,r.jsx)(X.lR,{children:"Date"}),(0,r.jsxs)(et.AM,{children:[(0,r.jsx)(et.Wv,{asChild:!0,children:(0,r.jsx)(X.MJ,{children:(0,r.jsxs)(w.$,{variant:"outline",className:(0,H.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,i.GP)(t.value,"PPP"):(0,r.jsx)("span",{children:"Pick a date"}),(0,r.jsx)(er.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,r.jsx)(et.hl,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(s.V,{mode:"single",selected:t.value,onSelect:t.onChange,initialFocus:!0})})]}),(0,r.jsx)(X.C5,{})]})}}),(0,r.jsx)(X.zB,{control:j.control,name:"isAllDay",render:e=>{let{field:t}=e;return(0,r.jsxs)(X.eI,{className:"flex flex-row items-center space-x-3 space-y-0 rounded-md border p-3 shadow-sm",children:[(0,r.jsx)(X.MJ,{children:(0,r.jsx)(ea.S,{checked:t.value,onCheckedChange:t.onChange})}),(0,r.jsx)("div",{className:"space-y-1 leading-none",children:(0,r.jsx)(X.lR,{className:"cursor-pointer",children:"All-day event"})})]})}}),!N&&(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(X.zB,{control:j.control,name:"startTime",render:e=>{let{field:t}=e;return(0,r.jsxs)(X.eI,{children:[(0,r.jsx)(X.lR,{children:"Start Time"}),(0,r.jsxs)(ee.l6,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(X.MJ,{children:(0,r.jsx)(ee.bq,{children:(0,r.jsx)(ee.yv,{placeholder:"Select start time"})})}),(0,r.jsx)(ee.gC,{children:em.map(e=>(0,r.jsx)(ee.eb,{value:e,children:eu(e)},"start-".concat(e)))})]}),(0,r.jsx)(X.C5,{})]})}}),(0,r.jsx)(X.zB,{control:j.control,name:"endTime",render:e=>{let{field:t}=e;return(0,r.jsxs)(X.eI,{children:[(0,r.jsx)(X.lR,{children:"End Time"}),(0,r.jsxs)(ee.l6,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(X.MJ,{children:(0,r.jsx)(ee.bq,{children:(0,r.jsx)(ee.yv,{placeholder:"Select end time"})})}),(0,r.jsx)(ee.gC,{children:em.map(e=>(0,r.jsx)(ee.eb,{value:e,children:eu(e)},"end-".concat(e)))})]}),(0,r.jsx)(X.C5,{})]})}})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,r.jsx)("div",{children:x&&n&&(0,r.jsxs)(w.$,{type:"button",variant:"destructive",onClick:()=>n(d.id),disabled:f,children:[(0,r.jsx)(es.A,{className:"mr-2 h-4 w-4"})," Delete"]})}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(w.$,{type:"button",variant:"ghost",onClick:a,children:"Cancel"}),(0,r.jsxs)(w.$,{type:"submit",disabled:f,children:[f?(0,r.jsx)(L.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(en.A,{className:"mr-2 h-4 w-4"}),x?"Save Changes":"Save Event"]})]})]})]})})}var ep=a(55863);let ex=l.forwardRef((e,t)=>{let{className:a,value:s,...n}=e;return(0,r.jsx)(ep.bL,{ref:t,className:(0,H.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...n,children:(0,r.jsx)(ep.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});ex.displayName=ep.bL.displayName;var eh=a(26126),eg=a(67690),ey=a(17132),ev=a(7860),ew=a(92266),eb=a(40274),ej=a(91721);let eN=Array.from({length:9},(e,t)=>{let a=t+7;return 12===a?"12 PM":a>12?"".concat(a-12," PM"):"".concat(a," AM")}),eD=e=>{switch(e.eventType){case"Out of Office":return"border-green-500 bg-green-50 text-green-900 dark:bg-green-900/20 dark:border-green-500/70 dark:text-green-100";case"Busy":return"border-orange-500 bg-orange-50 text-orange-900 dark:bg-orange-900/20 dark:border-orange-500/70 dark:text-orange-100";default:return"border-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-900/20 dark:border-blue-500/70 dark:text-blue-100"}},eC=e=>{let{dayColumns:t}=e,[a,s]=(0,l.useState)(new Date),n=t.findIndex(e=>(0,eg.c)(e));if((0,l.useEffect)(()=>{let e=setInterval(()=>{s(new Date)},6e4);return()=>clearInterval(e)},[]),-1===n)return null;let i=(0,el.q)(a)+(0,ey.O)(a)/60-7;return i<0||i>9?null:(0,r.jsx)("div",{className:"absolute z-10 pointer-events-none",style:{left:"calc(".concat(20*n,"%)"),width:"20%",top:"".concat(60*i,"px")},children:(0,r.jsx)("div",{className:"relative h-px bg-destructive w-full",children:(0,r.jsx)("div",{className:"absolute -left-1.5 -top-1.5 h-3 w-3 rounded-full bg-destructive border-2 border-background"})})})};function eA(e){let{events:t,onHourSlotClick:a,onEventClick:s}=e,[o,d]=(0,l.useState)(new Date),c=(0,l.useRef)(null),m=(0,l.useRef)(null),f=(0,l.useRef)(null);(0,l.useEffect)(()=>{c.current&&(c.current.scrollTop=60)},[]),(0,l.useEffect)(()=>{let e=c.current,t=f.current;if(!e||!t)return;let a=()=>{t.scrollTop=e.scrollTop};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)},[]);let p=(0,g.k)(o,{weekStartsOn:1}),x=(0,ev.k)({start:p,end:(0,ew.W)(p,{days:4})}),h=(0,l.useMemo)(()=>{let e=new Map;return x.forEach(t=>{e.set((0,i.GP)(t,"yyyy-MM-dd"),[])}),t.forEach(t=>{if(t.startDate){let r=new Date(t.startDate);if(!(0,u.f)(r))return;let s=(0,i.GP)(r,"yyyy-MM-dd");if(e.has(s)){var a;null==(a=e.get(s))||a.push(t)}}}),e.forEach(e=>{e.sort((e,t)=>new Date(e.startDate).getTime()-new Date(t.startDate).getTime())}),e},[t,x]);return(0,r.jsxs)(n.Zp,{className:"shadow-md overflow-hidden flex flex-col h-[calc(100vh-200px)]",children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between gap-4 border-b p-3 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"text-lg font-semibold",children:(0,i.GP)(p,"MMMM yyyy")}),(0,r.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>d(new Date),children:"Today"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>d(e=>(0,ew.W)(e,{weeks:-1})),children:(0,r.jsx)(z.A,{className:"h-5 w-5"})}),(0,r.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>d(e=>(0,ew.W)(e,{weeks:1})),children:(0,r.jsx)(B.A,{className:"h-5 w-5"})})]})]}),(0,r.jsxs)("div",{className:"flex flex-grow min-h-0",children:[(0,r.jsxs)("div",{className:"w-20 text-sm text-right flex-shrink-0",children:[(0,r.jsx)("div",{ref:m,className:"h-20"})," ",(0,r.jsx)("div",{ref:f,className:"overflow-hidden",style:{height:"calc(100% - 5rem)"},children:eN.map((e,t)=>(0,r.jsx)("div",{className:"relative pr-2",style:{height:"".concat(60,"px")},children:(0,r.jsx)("span",{className:(0,H.cn)("absolute right-2 text-muted-foreground",0===t?"top-0":"-top-2.5"),children:e})},e))})]}),(0,r.jsxs)("div",{className:"flex-grow overflow-hidden relative",children:[(0,r.jsx)("div",{className:"grid grid-cols-5 sticky top-0 bg-card z-20 border-b",children:x.map(e=>(0,r.jsxs)("div",{className:"h-20 flex flex-col items-center justify-center border-l py-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:(0,i.GP)(e,"EEE")}),(0,r.jsx)("div",{className:(0,H.cn)("mt-1 w-8 h-8 flex items-center justify-center rounded-full text-lg font-semibold",(0,eg.c)(e)&&"bg-primary text-primary-foreground"),children:(0,i.GP)(e,"d")})]},e.toString()))}),(0,r.jsx)("div",{ref:c,className:"overflow-y-auto h-full",children:(0,r.jsxs)("div",{className:"grid grid-cols-5 relative min-h-full",children:[x.map((e,t)=>(0,r.jsx)("div",{className:"relative border-l",children:Array.from({length:9}).map((s,n)=>{let l=(0,ei.h)(e,{hours:7+n,minutes:0,seconds:0,milliseconds:0});return(0,r.jsx)("div",{onClick:()=>a(l),className:"border-b border-border/70 hover:bg-accent transition-colors cursor-pointer",style:{height:"".concat(60,"px")}},"".concat(t,"-").concat(n))})},"col-".concat(e.toString()))),Array.from(h.entries()).map((e,t)=>{let[a,n]=e;return n.map(e=>{let a=new Date(e.startDate),n=new Date(e.endDate);if(!(0,u.f)(a)||!(0,u.f)(n))return null;let l=60*(0,el.q)(a)+(0,ey.O)(a);if(60*(0,el.q)(n)+(0,ey.O)(n)<420||l>=960)return null;let o=Math.max(0,l-420),d=Math.max(15,(0,eb.o)(n,a));return(0,r.jsxs)("div",{onClick:()=>s(e),className:(0,H.cn)("absolute p-2 rounded-md cursor-pointer transition-all shadow-sm hover:shadow-md overflow-hidden z-[5] border-l-4",eD(e),e.isAllDay&&"opacity-90"),style:{top:"".concat(o/60*60,"px"),height:"".concat(d/60*60-2,"px"),left:"calc(".concat(20*t,"% + 4px)"),width:"calc(20% - 8px)"},title:"".concat(e.title).concat(e.isAllDay?" (All-day)":" - ".concat((0,i.GP)(a,"h:mm a"))),children:[(0,r.jsx)("p",{className:"font-semibold text-xs truncate",children:e.title}),!e.isAllDay&&(0,r.jsxs)("p",{className:"text-[10px] opacity-80",children:[(0,i.GP)(a,"h:mm a")," - ",(0,i.GP)(n,"h:mm a")]}),e.ownerName&&(0,r.jsxs)("div",{className:"flex items-center text-[10px] opacity-70 italic mt-1",children:[(0,r.jsx)(ej.A,{className:"w-2.5 h-2.5 mr-1"})," ",e.ownerName]})]},e.id)})}),(0,r.jsx)(eC,{dayColumns:x})]})})]})]})]})}let ek=e=>{let t="An unexpected error occurred while fetching items for the calendar.";if(e&&"object"==typeof e){if("status"in e&&0===e.status?t="Failed to load calendar items: Could not connect to the server. Please check your internet connection and try again.":e.data&&"object"==typeof e.data?e.data.message&&"string"==typeof e.data.message&&(t=e.data.message):e.message&&"string"==typeof e.message&&!e.message.startsWith("PocketBase_ClientResponseError")&&(t=e.message),"status"in e&&0!==e.status){let a=e.status;404===a?t="A required data collection was not found (404).":403===a&&(t="You do not have permission to view items for the calendar (403).")}}else"string"==typeof e&&(t=e);return t};function eP(e){let{date:t,tasksForDay:a}=e,s=(0,i.GP)(t,"d"),n=Math.min(a.filter(e=>(0,o.r)(new Date(e.startDate),t)).length,4);return(0,r.jsxs)("div",{className:"relative h-full w-full flex flex-col items-center justify-center",children:[(0,r.jsx)("span",{children:s}),n>0&&(0,r.jsx)("div",{className:"absolute -bottom-1 flex items-center justify-center",children:Array.from({length:n}).map((e,t)=>(0,r.jsx)(_.A,{className:"h-6 w-6 -mx-2 text-primary opacity-100"},t))})]})}let eE=e=>{if(!e)return"default";switch(e.toLowerCase()){case"urgent":case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"default"}};function eT(){let{pbClient:e,user:t}=(0,b.A)(),{toast:a}=(0,I.dj)(),[j,N]=(0,l.useState)([]),[D,C]=(0,l.useState)(!0),[k,P]=(0,l.useState)(null),[E,T]=(0,l.useState)("personal"),[R,S]=(0,l.useState)(new Date),[_,J]=(0,l.useState)({from:(0,d.o)(new Date),to:(0,d.o)(new Date)}),[W,Y]=(0,l.useState)(!1),Z=(0,l.useRef)(null),[X,K]=(0,l.useState)(),[Q,et]=(0,l.useState)("all"),[ea,er]=(0,l.useState)("all"),[es,en]=(0,l.useState)(null),el=(0,l.useCallback)(()=>{Y(!1),Z.current=null},[]);(0,l.useEffect)(()=>(window.addEventListener("mouseup",el),()=>{window.removeEventListener("mouseup",el)}),[el]);let ei=(0,l.useCallback)(async(e,t,r,s)=>{if(!e)return void C(!0);C(!0),P(null);try{let a=[];if("personal"===t)a=await M(e,r,{signal:s});else{let t=(0,c.e)(new Date,2);a=await A(e,{signal:s,projectionHorizon:t})}N(a)}catch(e){if((null==e?void 0:e.isAbort)===!0||"string"==typeof(null==e?void 0:e.message)&&e.message.toLowerCase().includes("autocancelled"))console.warn("Calendar data fetch request was ".concat((null==e?void 0:e.isAbort)?"aborted":"autocancelled","."),e);else{let t=ek(e);P(t),a({title:"Error Loading Calendar Data",description:t,variant:"destructive"}),console.warn("Error fetching data for calendar (after retries):",t,e)}}finally{C(!1)}},[a]);(0,l.useEffect)(()=>{let a=new AbortController;return e&&t?ei(e,E,t.id,a.signal):C(!0),()=>{a.abort()}},[e,t,E,ei]);let eo=(0,l.useMemo)(()=>{let e=j;return"all"!==Q&&(e=e.filter(e=>e.priority===Q)),"task"===E&&"all"!==ea&&(e=e.filter(e=>e.status===ea)),e},[j,E,Q,ea]),{tasksByDay:ec,statusModifiers:eu}=(0,l.useMemo)(()=>{let e=new Map,t={completed:new Set,overdue:new Set,almostDue:new Set,active:new Set,validation:new Set},a=(0,d.o)(new Date);for(let r of eo){if(!r.startDate)continue;let s=new Date(r.startDate);if((0,u.f)(s))if(("VALIDATION_PROJECT"===r.task_type||"VALIDATION_STEP"===r.task_type)&&r.endDate&&(0,u.f)(new Date(r.endDate))){let a=new Date(r.endDate),n=(0,d.o)(s),l=(0,d.o)(a);for(let a=n;a<=l;a=(0,m.f)(a,1)){let s=(0,i.GP)(a,"yyyy-MM-dd");e.has(s)||e.set(s,[]),e.get(s).find(e=>e.id===r.id)||e.get(s).push(r),t.validation.add(a.getTime())}}else{let n=(0,d.o)(s),l=(0,i.GP)(n,"yyyy-MM-dd");if(e.has(l)||e.set(l,[]),e.get(l).find(e=>e.id===r.id)||e.get(l).push(r),"task"===E&&r.status){if(!r.endDate||!(0,u.f)(new Date(r.endDate)))continue;let e=new Date(r.endDate);if(!(0,u.f)(e))continue;let s=(0,d.o)(e);if("Done"===r.status)t.completed.add(s.getTime());else if((0,f.R)(s)&&!(0,o.r)(s,a))t.overdue.add(s.getTime());else{let e=(0,p.m)(s,a);e>=0&&e<3?t.almostDue.add(s.getTime()):((0,x.G)(s)||(0,o.r)(s,a))&&t.active.add(s.getTime())}}}}return{tasksByDay:e,statusModifiers:{completed:Array.from(t.completed).map(e=>new Date(e)),overdue:Array.from(t.overdue).map(e=>new Date(e)),almostDue:Array.from(t.almostDue).map(e=>new Date(e)),active:Array.from(t.active).map(e=>new Date(e)),validation:Array.from(t.validation).map(e=>new Date(e))}}},[eo,E]),em=(0,l.useMemo)(()=>{if(!(null==_?void 0:_.from))return[];let e=(0,d.o)(_.from),t=_.to?(0,d.o)(_.to):e,a=new Map;for(let r=e;r<=t;r=(0,m.f)(r,1)){let e=(0,i.GP)(r,"yyyy-MM-dd");ec.has(e)&&ec.get(e).forEach(e=>{a.set(e.id,e)})}return Array.from(a.values()).sort((e,t)=>new Date(e.startDate).getTime()-new Date(t.startDate).getTime())},[_,ec]),ep=()=>{e&&t&&ei(e,E,t.id)},eg=()=>{ep()},ey=()=>{K(void 0)},ev=()=>{en(null)},ew=async t=>{if(e)try{await O(e,t),a({title:"Event Deleted",description:"The event has been removed from your calendar."}),ep(),ev()}catch(e){a({title:"Error Deleting Event",description:ek(e),variant:"destructive"})}},eb=(0,l.useMemo)(()=>(null==_?void 0:_.from)?!_.to||(0,o.r)(_.from,_.to)?(0,i.GP)(_.from,"PPP"):"".concat((0,i.GP)(_.from,"PPP")," - ").concat((0,i.GP)(_.to,"PPP")):"No date selected",[_]);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-headline font-semibold",children:"Calendar"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(V,{value:E,onValueChange:T,children:(0,r.jsxs)(U,{children:[(0,r.jsx)(q,{value:"personal",children:"Personal Calendar"}),(0,r.jsx)(q,{value:"task",children:"Task Calendar"})]})}),"personal"===E&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($.lG,{open:!!X,onOpenChange:e=>!e&&ey(),children:(0,r.jsxs)($.Cf,{children:[(0,r.jsx)($.c7,{children:(0,r.jsx)($.L3,{children:"Add a New Personal Event"})}),(0,r.jsx)(ef,{onTaskCreated:eg,onDialogClose:ey,defaultDate:X})]})}),(0,r.jsx)($.lG,{open:!!es,onOpenChange:e=>!e&&ev(),children:(0,r.jsxs)($.Cf,{children:[(0,r.jsx)($.c7,{children:(0,r.jsx)($.L3,{children:"Edit Personal Event"})}),(0,r.jsx)(ef,{eventToEdit:es,onTaskCreated:eg,onDialogClose:ev,onDelete:ew})]})})]})]})]}),D?(0,r.jsxs)("div",{className:"flex justify-center items-center py-10",children:[(0,r.jsx)(L.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,r.jsx)("p",{className:"ml-2",children:"Loading calendar..."})]}):k?(0,r.jsxs)("div",{className:"text-center py-10 text-destructive",children:[(0,r.jsx)(F.A,{className:"mx-auto h-12 w-12 text-destructive"}),(0,r.jsx)("p",{className:"mt-4 text-lg font-semibold",children:"Failed to Load Calendar Data"}),(0,r.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:k}),(0,r.jsx)(w.$,{onClick:ep,className:"mt-6",children:"Try Again"})]}):(0,r.jsxs)(r.Fragment,{children:["task"===E&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.Zp,{className:"shadow-md",children:[(0,r.jsxs)(n.aR,{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.$,{variant:"outline",size:"icon",onClick:()=>{S(e=>(0,m.f)((0,h.w)(e),-1))},children:(0,r.jsx)(z.A,{className:"h-4 w-4"})}),(0,r.jsx)(w.$,{variant:"outline",size:"icon",onClick:()=>{S(e=>(0,m.f)((0,h.w)(e),32))},children:(0,r.jsx)(B.A,{className:"h-4 w-4"})}),(0,r.jsx)("h2",{className:"text-lg font-semibold ml-2",children:(0,i.GP)(R,"MMMM yyyy")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>J({from:new Date,to:new Date}),children:"Today"}),(0,r.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>J({from:(0,g.k)(new Date),to:(0,y.$)(new Date)}),children:"This Week"}),(0,r.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>J({from:(0,h.w)(new Date),to:(0,v.p)(new Date)}),children:"This Month"})]})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsx)(s.V,{mode:"range",month:R,onMonthChange:S,selected:_,onDayMouseDown:(e,t)=>{Y(!0),Z.current=e,J({from:e,to:e})},onDayMouseEnter:(e,t)=>{if(W&&Z.current){let t=Z.current;t<=e?J({from:t,to:e}):J({from:e,to:t})}},onDayClick:(e,t)=>{J({from:e,to:e})},onSelect:void 0,numberOfMonths:2,className:"p-0",classNames:{day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary/90 text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground rounded-full",day_range_middle:"aria-selected:bg-primary/20 aria-selected:text-primary-foreground rounded-none"},modifiers:eu,modifiersClassNames:{completed:"!bg-green-100 dark:!bg-green-900/50",overdue:"!bg-red-100 dark:!bg-red-900/50",almostDue:"!bg-yellow-100 dark:!bg-yellow-800/50",active:"!bg-blue-100 dark:!bg-blue-900/50",validation:"bg-validation"},components:{DayContent:e=>(0,r.jsx)(eP,{date:e.date,tasksForDay:ec.get((0,i.GP)(e.date,"yyyy-MM-dd"))||[]})}})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsx)(n.aR,{children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(n.ZB,{className:"font-headline",children:["Tasks for: ",eb]}),(0,r.jsxs)(n.BT,{children:[em.length," task(s) found in the selected period for the Task calendar."]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(G.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)(ee.l6,{value:Q,onValueChange:e=>et(e),children:[(0,r.jsx)(ee.bq,{className:"w-[140px]",children:(0,r.jsx)(ee.yv,{placeholder:"Filter by priority"})}),(0,r.jsxs)(ee.gC,{children:[(0,r.jsx)(ee.eb,{value:"all",children:"All Priorities"}),ed.PN.map(e=>(0,r.jsx)(ee.eb,{value:e,children:e},e))]})]}),"task"===E&&(0,r.jsxs)(ee.l6,{value:ea,onValueChange:e=>er(e),children:[(0,r.jsx)(ee.bq,{className:"w-[140px]",children:(0,r.jsx)(ee.yv,{placeholder:"Filter by status"})}),(0,r.jsxs)(ee.gC,{children:[(0,r.jsx)(ee.eb,{value:"all",children:"All Statuses"}),ed.Hi.map(e=>(0,r.jsx)(ee.eb,{value:e,children:e},e))]})]})]})]})}),(0,r.jsx)(n.Wu,{children:em.length>0?(0,r.jsx)("ul",{className:"space-y-4",children:em.map(e=>(0,r.jsx)("li",{className:"p-4 rounded-md border bg-card hover:bg-muted/50 transition-colors",children:(0,r.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(eh.E,{variant:eE(e.priority),children:e.priority||"N/A"}),(0,r.jsx)("h3",{className:"font-semibold",children:e.title})]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),"number"==typeof e.progress&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"Progress"}),(0,r.jsxs)("span",{className:"text-xs font-medium",children:[e.progress,"%"]})]}),(0,r.jsx)(ex,{value:e.progress,className:"h-2"})]})]}),(0,r.jsxs)("div",{className:"text-right flex-shrink-0 ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:(0,i.GP)(new Date(e.startDate),"MMM dd")}),(0,r.jsx)("p",{className:(0,H.cn)("text-xs mt-1","Done"===e.status?"text-green-600":"text-muted-foreground"),children:e.status})]})]})},e.id))}):(0,r.jsx)("p",{className:"text-muted-foreground py-8 text-center",children:"No tasks scheduled for the selected period matching your filters."})})]})]}),"personal"===E&&(0,r.jsx)(eA,{events:eo,onHourSlotClick:e=>{K(e)},onEventClick:e=>{en(e)}})]})]})}},59409:(e,t,a)=>{"use strict";a.d(t,{bq:()=>m,eb:()=>h,gC:()=>x,l6:()=>c,yv:()=>u});var r=a(95155),s=a(12115),n=a(31992),l=a(79556),i=a(77381),o=a(10518),d=a(59434);let c=n.bL;n.YJ;let u=n.WT,m=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(n.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[s,(0,r.jsx)(n.In,{asChild:!0,children:(0,r.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.l9.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=n.PP.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})});p.displayName=n.wn.displayName;let x=s.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...i}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsxs)(n.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,r.jsx)(f,{}),(0,r.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(p,{})]})})});x.displayName=n.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=n.JU.displayName;let h=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(n.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})}),(0,r.jsx)(n.p4,{children:s})]})});h.displayName=n.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=n.wv.displayName},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var r=a(95155),s=a(12115),n=a(59434);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});l.displayName="Input"},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var r=a(95155),s=a(12115),n=a(59434);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-xl md:text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},73835:(e,t,a)=>{"use strict";a.d(t,{w:()=>o});var r=a(70831),s=a(96019),n=a(78039),l=a(86622),i=a(63482);function o(e,t){let a=[];return e.forEach(e=>{if(a.push(e),"None"===e.recurrence||!e.dueDate)return;let o=new Date(e.dueDate),d=e.startDate?new Date(e.dueDate).getTime()-new Date(e.startDate).getTime():0,c=1;for(;;){let u=new Date(o);switch(e.recurrence){case"Daily":o=(0,r.f)(u,1);break;case"Weekly":o=(0,s.J)(u,1);break;case"Monthly":o=(0,n.P)(u,1);break;case"Yearly":o=(0,l.e)(u,1);break;default:return}if((0,i.Y)(o,t)){let t=e.startDate?new Date(o.getTime()-d):void 0,r={...e,id:"".concat(e.id,"_proj_").concat(c),dueDate:o,startDate:t,status:"To Do",progress:0,attachments:[],description:"Recurring instance of: ".concat(e.title,". Original due date: ").concat(new Date(e.dueDate).toLocaleDateString())};a.push(r),c++}else break}}),a}},85057:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var r=a(95155),s=a(12115),n=a(40968),l=a(74466),i=a(59434);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,i.cn)(o(),a),...s})});d.displayName=n.b.displayName},85511:(e,t,a)=>{"use strict";a.d(t,{V:()=>d});var r=a(95155);a(12115);var s=a(965),n=a(73158),l=a(89058),i=a(59434),o=a(30285);function d(e){let{className:t,classNames:a,showOutsideDays:d=!0,...c}=e;return(0,r.jsx)(l.hv,{showOutsideDays:d,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,r.jsx)(s.A,{className:(0,i.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,r.jsx)(n.A,{className:(0,i.cn)("h-4 w-4",t),...a})}},...c})}d.displayName="Calendar"},88539:(e,t,a)=>{"use strict";a.d(t,{T:()=>l});var r=a(95155),s=a(12115),n=a(59434);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});l.displayName="Textarea"},91950:(e,t,a)=>{"use strict";a.d(t,{C3:()=>i,Hi:()=>r,PN:()=>s,Y$:()=>l,ci:()=>o,oe:()=>c,tk:()=>u,xJ:()=>d,y4:()=>n});let r=["To Do","In Progress","Blocked","Done","Overdue"],s=["Low","Medium","High","Urgent"],n=["None","Daily","Weekly","Monthly","Yearly"],l=["Available","Busy","Out of Office"],i="LabFlow",o=["MDL","SOP","IA","iDOC","oDOC","VALIDATION_PROJECT","VALIDATION_STEP"],d={"Hydra AA":["Mercury by EPA 245.1","Mercury by EPA 7471B & 7470A"],"Hydra II":["Mercury by EPA 245.1","Mercury by EPA 7471B & 7470A"],"PE Optima 5300V":["Metals by EPA 200.7"],"PE Optima 8300":["Metals by EPA 200.7"],"iCAP 7400 DUO":["Metals by EPA 200.7"],"PE Optima 7300V":["Metals by EPA 200.7"],"PE Elan 9000":["Metals by EPA 200.8"],"Agilent 7900":["Metals by EPA 200.8"],"PE NexION 300X":[],"PE NexION 300D":[]},c=Object.keys(d),u=(()=>{let e=[];for(let t=0;t<=16;t++)e.push("BOL50".concat(String(t).padStart(2,"0")));for(let t=18;t<=24;t++)e.push("BOL50".concat(String(t).padStart(2,"0")));for(let t=26;t<=28;t++)e.push("BOL50".concat(String(t).padStart(2,"0")));for(let t=0;t<=2;t++)e.push("BOL55".concat(String(t).padStart(2,"0")));return e})()}},e=>{var t=t=>e(e.s=t);e.O(0,[383,897,52,198,977,859,452,414,715,876,441,303,358],()=>t(13813)),_N_E=e.O()}]);