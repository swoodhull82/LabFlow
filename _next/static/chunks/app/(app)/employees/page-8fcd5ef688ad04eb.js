(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[973],{3561:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},7454:(e,t,a)=>{Promise.resolve().then(a.bind(a,72151))},15452:(e,t,a)=>{"use strict";a.d(t,{UC:()=>et,VY:()=>es,ZL:()=>K,bL:()=>X,bm:()=>er,hE:()=>ea,hJ:()=>ee,l9:()=>Q});var s=a(12115),r=a(85185),l=a(6101),n=a(46081),o=a(61285),i=a(5845),d=a(19178),c=a(25519),m=a(34378),u=a(28905),p=a(63655),f=a(92293),x=a(93795),h=a(38168),y=a(99708),j=a(95155),g="Dialog",[v,N]=(0,n.A)(g),[b,w]=v(g),C=e=>{let{__scopeDialog:t,children:a,open:r,defaultOpen:l,onOpenChange:n,modal:d=!0}=e,c=s.useRef(null),m=s.useRef(null),[u=!1,p]=(0,i.i)({prop:r,defaultProp:l,onChange:n});return(0,j.jsx)(b,{scope:t,triggerRef:c,contentRef:m,contentId:(0,o.B)(),titleId:(0,o.B)(),descriptionId:(0,o.B)(),open:u,onOpenChange:p,onOpenToggle:s.useCallback(()=>p(e=>!e),[p]),modal:d,children:a})};C.displayName=g;var R="DialogTrigger",A=s.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,n=w(R,a),o=(0,l.s)(t,n.triggerRef);return(0,j.jsx)(p.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Y(n.open),...s,ref:o,onClick:(0,r.m)(e.onClick,n.onOpenToggle)})});A.displayName=R;var _="DialogPortal",[E,k]=v(_,{forceMount:void 0}),T=e=>{let{__scopeDialog:t,forceMount:a,children:r,container:l}=e,n=w(_,t);return(0,j.jsx)(E,{scope:t,forceMount:a,children:s.Children.map(r,e=>(0,j.jsx)(u.C,{present:a||n.open,children:(0,j.jsx)(m.Z,{asChild:!0,container:l,children:e})}))})};T.displayName=_;var I="DialogOverlay",D=s.forwardRef((e,t)=>{let a=k(I,e.__scopeDialog),{forceMount:s=a.forceMount,...r}=e,l=w(I,e.__scopeDialog);return l.modal?(0,j.jsx)(u.C,{present:s||l.open,children:(0,j.jsx)(F,{...r,ref:t})}):null});D.displayName=I;var F=s.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,r=w(I,a);return(0,j.jsx)(x.A,{as:y.DX,allowPinchZoom:!0,shards:[r.contentRef],children:(0,j.jsx)(p.sG.div,{"data-state":Y(r.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),M="DialogContent",O=s.forwardRef((e,t)=>{let a=k(M,e.__scopeDialog),{forceMount:s=a.forceMount,...r}=e,l=w(M,e.__scopeDialog);return(0,j.jsx)(u.C,{present:s||l.open,children:l.modal?(0,j.jsx)(S,{...r,ref:t}):(0,j.jsx)(z,{...r,ref:t})})});O.displayName=M;var S=s.forwardRef((e,t)=>{let a=w(M,e.__scopeDialog),n=s.useRef(null),o=(0,l.s)(t,a.contentRef,n);return s.useEffect(()=>{let e=n.current;if(e)return(0,h.Eq)(e)},[]),(0,j.jsx)(L,{...e,ref:o,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.m)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=a.triggerRef.current)||t.focus()}),onPointerDownOutside:(0,r.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,r.m)(e.onFocusOutside,e=>e.preventDefault())})}),z=s.forwardRef((e,t)=>{let a=w(M,e.__scopeDialog),r=s.useRef(!1),l=s.useRef(!1);return(0,j.jsx)(L,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,n;null==(s=e.onCloseAutoFocus)||s.call(e,t),t.defaultPrevented||(r.current||null==(n=a.triggerRef.current)||n.focus(),t.preventDefault()),r.current=!1,l.current=!1},onInteractOutside:t=>{var s,n;null==(s=e.onInteractOutside)||s.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(l.current=!0));let o=t.target;(null==(n=a.triggerRef.current)?void 0:n.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&l.current&&t.preventDefault()}})}),L=s.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:o,...i}=e,m=w(M,a),u=s.useRef(null),p=(0,l.s)(t,u);return(0,f.Oh)(),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.n,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:o,children:(0,j.jsx)(d.qW,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":Y(m.open),...i,ref:p,onDismiss:()=>m.onOpenChange(!1)})}),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(W,{titleId:m.titleId}),(0,j.jsx)($,{contentRef:u,descriptionId:m.descriptionId})]})]})}),P="DialogTitle",B=s.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,r=w(P,a);return(0,j.jsx)(p.sG.h2,{id:r.titleId,...s,ref:t})});B.displayName=P;var J="DialogDescription",V=s.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,r=w(J,a);return(0,j.jsx)(p.sG.p,{id:r.descriptionId,...s,ref:t})});V.displayName=J;var q="DialogClose",H=s.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,l=w(q,a);return(0,j.jsx)(p.sG.button,{type:"button",...s,ref:t,onClick:(0,r.m)(e.onClick,()=>l.onOpenChange(!1))})});function Y(e){return e?"open":"closed"}H.displayName=q;var Z="DialogTitleWarning",[G,U]=(0,n.q)(Z,{contentName:M,titleName:P,docsSlug:"dialog"}),W=e=>{let{titleId:t}=e,a=U(Z),r="`".concat(a.contentName,"` requires a `").concat(a.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(a.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(a.docsSlug);return s.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},$=e=>{let{contentRef:t,descriptionId:a}=e,r=U("DialogDescriptionWarning"),l="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(r.contentName,"}.");return s.useEffect(()=>{var e;let s=null==(e=t.current)?void 0:e.getAttribute("aria-describedby");a&&s&&(document.getElementById(a)||console.warn(l))},[l,t,a]),null},X=C,Q=A,K=T,ee=D,et=O,ea=B,es=V,er=H},17759:(e,t,a)=>{"use strict";a.d(t,{C5:()=>y,MJ:()=>h,eI:()=>f,lR:()=>x,lV:()=>d,zB:()=>m});var s=a(95155),r=a(12115),l=a(99708),n=a(62177),o=a(59434),i=a(85057);let d=n.Op,c=r.createContext({}),m=e=>{let{...t}=e;return(0,s.jsx)(c.Provider,{value:{name:t.name},children:(0,s.jsx)(n.xI,{...t})})},u=()=>{let e=r.useContext(c),t=r.useContext(p),{getFieldState:a,formState:s}=(0,n.xW)(),l=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...l}},p=r.createContext({}),f=r.forwardRef((e,t)=>{let{className:a,...l}=e,n=r.useId();return(0,s.jsx)(p.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",a),...l})})});f.displayName="FormItem";let x=r.forwardRef((e,t)=>{let{className:a,...r}=e,{error:l,formItemId:n}=u();return(0,s.jsx)(i.J,{ref:t,className:(0,o.cn)(l&&"text-destructive",a),htmlFor:n,...r})});x.displayName="FormLabel";let h=r.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:n,formDescriptionId:o,formMessageId:i}=u();return(0,s.jsx)(l.DX,{ref:t,id:n,"aria-describedby":r?"".concat(o," ").concat(i):"".concat(o),"aria-invalid":!!r,...a})});h.displayName="FormControl",r.forwardRef((e,t)=>{let{className:a,...r}=e,{formDescriptionId:l}=u();return(0,s.jsx)("p",{ref:t,id:l,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})}).displayName="FormDescription";let y=r.forwardRef((e,t)=>{var a;let{className:r,children:l,...n}=e,{error:i,formMessageId:d}=u(),c=i?String(null!=(a=null==i?void 0:i.message)?a:""):l;return c?(0,s.jsx)("p",{ref:t,id:d,className:(0,o.cn)("text-sm font-medium text-destructive",r),...n,children:c}):null});y.displayName="FormMessage"},18763:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},25318:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},30645:(e,t,a)=>{"use strict";a.d(t,{b:()=>r});let s={maxAttempts:3,delayMs:1e3,shouldRetry:e=>!!e&&"object"==typeof e&&!(!0===e.isAbort||"string"==typeof e.message&&e.message.toLowerCase().includes("aborted"))&&(0===e.status||502===e.status||503===e.status||504===e.status),context:"operation"};async function r(e,t){let a,r={...s,...t};for(let t=1;t<=r.maxAttempts;t++)try{return await e()}catch(e){if(a=e,r.shouldRetry(e))r.onRetry&&r.onRetry(t,e),t<r.maxAttempts?(console.warn("Attempt ".concat(t," failed for ").concat(r.context,". Retrying in ").concat(r.delayMs*Math.pow(2,t-1),"ms... Error: ").concat(e.message||JSON.stringify(e))),await new Promise(e=>setTimeout(e,r.delayMs*Math.pow(2,t-1)))):console.warn("All ".concat(r.maxAttempts," attempts failed for ").concat(r.context,". Last error: ").concat(e.message||JSON.stringify(e)));else throw e}throw a}},31949:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},34301:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},44838:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>u,_2:()=>p,lp:()=>f,mB:()=>x,rI:()=>c,ty:()=>m});var s=a(95155),r=a(12115),l=a(9449),n=a(73158),o=a(10518),i=a(70154),d=a(59434);let c=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:o,...i}=e;return(0,s.jsxs)(l.ZP,{ref:t,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...i,children:[o,(0,s.jsx)(n.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=l.G5.displayName;let u=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{ref:t,sideOffset:r,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});u.displayName=l.UC.displayName;let p=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(l.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n})});p.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...i}=e;return(0,s.jsxs)(l.H_,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),r]})}).displayName=l.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(l.hN,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(i.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName;let f=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})});f.displayName=l.JU.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});x.displayName=l.wv.displayName},72151:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Y});var s=a(95155),r=a(30285),l=a(66695),n=a(85127),o=a(44838),i=a(12115),d=a(15452),c=a(25318),m=a(59434);let u=d.bL;d.l9;let p=d.ZL,f=d.bm,x=i.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(d.hJ,{ref:t,className:(0,m.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});x.displayName=d.hJ.displayName;let h=i.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(p,{children:[(0,s.jsx)(x,{}),(0,s.jsxs)(d.UC,{ref:t,className:(0,m.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,s.jsxs)(d.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=d.UC.displayName;let y=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,m.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};y.displayName="DialogHeader";let j=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,m.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};j.displayName="DialogFooter";let g=i.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(d.hE,{ref:t,className:(0,m.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});g.displayName=d.hE.displayName;let v=i.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(d.VY,{ref:t,className:(0,m.cn)("text-sm text-muted-foreground",a),...r})});v.displayName=d.VY.displayName;var N=a(62523),b=a(59409),w=a(17759),C=a(50172),R=a(34301),A=a(31949),_=a(3561),E=a(18763),k=a(77223),T=a(59119),I=a(6874),D=a.n(I),F=a(59576),M=a(35695),O=a(97841),S=a(87481),z=a(62177),L=a(90221),P=a(55594);let B=P.Ik({name:P.Yj().min(2,{message:"Name must be at least 2 characters."}),email:P.Yj().email({message:"Please enter a valid email address."}),role:P.Yj().min(1,{message:"Role is required."}),department_text:P.Yj().optional(),reportsTo_text:P.Yj().optional()}),J="__NONE__",V=["Supervisor","Team Lead","Chem I","Chem II"],q=["Trace Metals","Automated","Air & Grav","Organics","BacT","Radiation","MAU","SpecOp"],H=e=>{let t="An unexpected error occurred while managing employees.";if(e&&"object"==typeof e){if("status"in e&&0===e.status?t="Failed to load employees: Could not connect to the server. Please check your internet connection and try again.":e.data&&"object"==typeof e.data&&e.data.message&&"string"==typeof e.data.message?t=e.data.message:e.message&&"string"==typeof e.message&&!e.message.startsWith("PocketBase_ClientResponseError")?t=e.message:e.originalError&&"string"==typeof e.originalError.message?t=e.originalError.message:e.message&&"string"==typeof e.message&&(t=e.message),"status"in e&&0!==e.status){let a=e.status;404===a?t="The employees collection was not found (404). Original: ".concat(t):403===a&&(t="You do not have permission to manage employees (403). Original: ".concat(t))}}else"string"==typeof e&&(t=e);return t};function Y(){let{pbClient:e,user:t}=(0,F.A)(),a=(0,M.useRouter)(),{toast:d}=(0,S.dj)(),[c,m]=(0,i.useState)([]),[p,x]=(0,i.useState)(!0),[I,P]=(0,i.useState)(null),[Y,Z]=(0,i.useState)(!1),[G,U]=(0,i.useState)(null),[W,$]=(0,i.useState)(!1),X=(null==t?void 0:t.role)==="Supervisor"||(null==t?void 0:t.role)==="Team Lead",Q=(0,z.mN)({resolver:(0,L.u)(B),defaultValues:{name:"",email:"",role:"",department_text:"",reportsTo_text:""}}),K=(0,i.useCallback)(async(e,t)=>{x(!0),P(null);try{let a=await (0,O.Oc)(e,{signal:t});m(a)}catch(a){let e=(null==a?void 0:a.isAbort)===!0||"string"==typeof(null==a?void 0:a.message)&&a.message.toLowerCase().includes("autocancelled"),t=(null==a?void 0:a.status)===0&&!e;if(e)console.warn("Employees fetch request was ".concat((null==a?void 0:a.isAbort)?"aborted":"autocancelled","."),a);else if(t){let e=H(a);P(e),d({title:"Error Loading Employees",description:e,variant:"destructive"}),console.warn("Employees fetch (network error):",e,a)}else{let e=H(a);P(e),d({title:"Error Loading Employees",description:e,variant:"destructive"}),console.warn("Error fetching employees (after retries):",e,a)}}finally{x(!1)}},[d]);(0,i.useEffect)(()=>{if(!e||!t)return void x(!0);if(!X){d({title:"Access Denied",description:"This page is for Supervisors and Team Leads only.",variant:"destructive"}),a.push("/dashboard");return}let s=new AbortController;return K(e,s.signal),()=>{s.abort()}},[t,e,a,d,K,X]);let ee=(0,i.useMemo)(()=>G?c.filter(e=>("Supervisor"===e.role||"Team Lead"===e.role)&&e.id!==G.id):[],[c,G]);(0,i.useEffect)(()=>{G&&Q.reset({name:G.name,email:G.email,role:G.role,department_text:G.department_text||"",reportsTo_text:G.reportsTo_text||""})},[G,Q]);let et=async t=>{if(!e)return void d({title:"Error",description:"Client not available.",variant:"destructive"});let a=[...c];m(e=>e.filter(e=>e.id!==t));try{await (0,O.Qu)(e,t),d({title:"Success",description:"Employee removed successfully."})}catch(e){console.error("Failed to delete employee:",e),m(a),d({title:"Error",description:H(e),variant:"destructive"})}},ea=e=>{U(e),Z(!0)},es=()=>{Z(!1),U(null),Q.reset()},er=async t=>{if(!G||!e)return void d({title:"Error",description:"Editing context or client not available.",variant:"destructive"});$(!0);let a=t.reportsTo_text!==J&&t.reportsTo_text?t.reportsTo_text:void 0,s=t.department_text!==J&&t.department_text?t.department_text:void 0,r={name:t.name,email:t.email,role:t.role,department_text:s,reportsTo_text:a};try{let t=await (0,O.Y$)(e,G.id,r);m(e=>e.map(e=>e.id===G.id?t:e)),d({title:"Success",description:"Employee details updated successfully."}),es()}catch(e){console.error("Failed to update employee:",e),d({title:"Error",description:H(e),variant:"destructive"})}finally{$(!1)}};return!t&&p?(0,s.jsxs)("div",{className:"flex items-center justify-center h-full p-4",children:[(0,s.jsx)(C.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ml-2",children:"Loading user information..."})]}):!t||X||p?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Employee Management"}),X&&(0,s.jsx)(D(),{href:"/employees/new",passHref:!0,children:(0,s.jsxs)(r.$,{children:[(0,s.jsx)(R.A,{className:"mr-2 h-4 w-4"})," Add Employee"]})})]}),(0,s.jsxs)(l.Zp,{className:"shadow-md",children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{className:"font-headline",children:"All Employees"}),(0,s.jsx)(l.BT,{children:"Manage employee information and access."})]}),(0,s.jsxs)(l.Wu,{children:[p&&(0,s.jsxs)("div",{className:"flex justify-center items-center py-10",children:[(0,s.jsx)(C.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ml-2",children:"Loading employees..."})]}),I&&!p&&(0,s.jsxs)("div",{className:"text-center py-10 text-destructive",children:[(0,s.jsx)(A.A,{className:"mx-auto h-12 w-12 text-destructive"}),(0,s.jsx)("p",{className:"mt-4 text-lg font-semibold",children:"Failed to Load Employees"}),(0,s.jsx)("p",{className:"text-sm",children:I}),(0,s.jsx)(r.$,{onClick:()=>{e&&X&&K(e)},className:"mt-6",children:"Try Again"})]}),!p&&!I&&0===c.length&&(0,s.jsx)("div",{className:"text-center py-10 text-muted-foreground",children:(0,s.jsx)("p",{children:"No employees found. Get started by adding a new employee."})}),!p&&!I&&c.length>0&&(0,s.jsxs)(n.XI,{children:[(0,s.jsx)(n.A0,{children:(0,s.jsxs)(n.Hj,{children:[(0,s.jsx)(n.nd,{children:"Name"}),(0,s.jsx)(n.nd,{children:"Email"}),(0,s.jsx)(n.nd,{children:"Role"}),(0,s.jsx)(n.nd,{children:"Department"}),(0,s.jsx)(n.nd,{children:"Reports To"}),X&&(0,s.jsx)(n.nd,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(n.BF,{children:c.map(e=>(0,s.jsxs)(n.Hj,{className:"hover:bg-muted/50 transition-colors",children:[(0,s.jsx)(n.nA,{children:(0,s.jsx)("span",{className:"font-medium",children:e.name})}),(0,s.jsx)(n.nA,{children:e.email}),(0,s.jsx)(n.nA,{children:e.role}),(0,s.jsx)(n.nA,{children:e.department_text||"-"}),(0,s.jsx)(n.nA,{children:e.reportsTo_text||"-"}),X&&(0,s.jsx)(n.nA,{className:"text-right",children:(0,s.jsxs)(o.rI,{children:[(0,s.jsx)(o.ty,{asChild:!0,children:(0,s.jsx)(r.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(_.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(o.SQ,{align:"end",children:[(0,s.jsxs)(o._2,{onClick:()=>ea(e),className:"flex items-center w-full",children:[(0,s.jsx)(E.A,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,s.jsxs)(o._2,{className:"text-destructive focus:text-destructive focus:bg-destructive/10",onClick:()=>et(e.id),children:[(0,s.jsx)(k.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},e.id))})]})]})]}),G&&X&&(0,s.jsx)(u,{open:Y,onOpenChange:e=>{e?Z(!0):es()},children:(0,s.jsxs)(h,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)(g,{className:"font-headline",children:["Edit Employee: ",G.name]}),(0,s.jsx)(v,{children:"Make changes to the employee's details below."})]}),(0,s.jsx)(w.lV,{...Q,children:(0,s.jsxs)("form",{onSubmit:Q.handleSubmit(er),className:"space-y-4 py-4",children:[(0,s.jsx)(w.zB,{control:Q.control,name:"name",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.lR,{children:"Full Name"}),(0,s.jsx)(w.MJ,{children:(0,s.jsx)(N.p,{...t})}),(0,s.jsx)(w.C5,{})]})}}),(0,s.jsx)(w.zB,{control:Q.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.lR,{children:"Email Address"}),(0,s.jsx)(w.MJ,{children:(0,s.jsx)(N.p,{type:"email",...t})}),(0,s.jsx)(w.C5,{})]})}}),(0,s.jsx)(w.zB,{control:Q.control,name:"role",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.lR,{children:"Role / Job Title"}),(0,s.jsxs)(b.l6,{onValueChange:t.onChange,value:t.value||"",children:[(0,s.jsx)(w.MJ,{children:(0,s.jsx)(b.bq,{children:(0,s.jsx)(b.yv,{placeholder:"Select a role"})})}),(0,s.jsx)(b.gC,{children:V.map(e=>(0,s.jsx)(b.eb,{value:e,children:e},e))})]}),(0,s.jsx)(w.C5,{})]})}}),(0,s.jsx)(w.zB,{control:Q.control,name:"department_text",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.lR,{children:"Department (Optional)"}),(0,s.jsxs)(b.l6,{onValueChange:t.onChange,value:t.value||"",children:[(0,s.jsx)(w.MJ,{children:(0,s.jsx)(b.bq,{children:(0,s.jsx)(b.yv,{placeholder:"Select a department (Optional)"})})}),(0,s.jsxs)(b.gC,{children:[(0,s.jsx)(b.eb,{value:J,children:"None"}),q.map(e=>(0,s.jsx)(b.eb,{value:e,children:e},e))]})]}),(0,s.jsx)(w.C5,{})]})}}),(0,s.jsx)(w.zB,{control:Q.control,name:"reportsTo_text",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.lR,{children:"Reports To (Supervisor or Team Lead - Optional)"}),(0,s.jsxs)(b.l6,{onValueChange:t.onChange,value:t.value||"",children:[(0,s.jsx)(w.MJ,{children:(0,s.jsx)(b.bq,{children:(0,s.jsx)(b.yv,{placeholder:"Select a manager"})})}),(0,s.jsxs)(b.gC,{children:[(0,s.jsx)(b.eb,{value:J,children:"None"}),ee.map(e=>(0,s.jsxs)(b.eb,{value:e.name,children:[e.name," (",e.role,")"]},e.id))]})]}),(0,s.jsx)(w.C5,{})]})}}),(0,s.jsxs)(j,{children:[(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)(r.$,{type:"button",variant:"outline",onClick:es,disabled:W,children:"Cancel"})}),(0,s.jsxs)(r.$,{type:"submit",disabled:W,children:[W?(0,s.jsx)(C.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(T.A,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})})]})})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full p-4",children:(0,s.jsxs)(l.Zp,{className:"w-full max-w-md shadow-lg",children:[(0,s.jsx)(l.aR,{children:(0,s.jsx)(l.ZB,{className:"text-center",children:"Access Denied"})}),(0,s.jsxs)(l.Wu,{children:[(0,s.jsx)("p",{className:"text-center text-muted-foreground",children:"This page is for Supervisors and Team Leads only."}),(0,s.jsx)(r.$,{onClick:()=>a.push("/dashboard"),className:"w-full mt-6",children:"Go to Dashboard"})]})]})})}},77223:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},85127:(e,t,a)=>{"use strict";a.d(t,{A0:()=>o,BF:()=>i,Hj:()=>d,XI:()=>n,nA:()=>m,nd:()=>c});var s=a(95155),r=a(12115),l=a(59434);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",a),...r})})});n.displayName="Table";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...r})});o.displayName="TableHeader";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...r})});i.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});d.displayName="TableRow";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});c.displayName="TableHead";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});m.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},97841:(e,t,a)=>{"use strict";a.d(t,{Oc:()=>n,Qu:()=>d,Y$:()=>i,bV:()=>o});var s=a(30645);let r="employees",l=e=>({id:e.id,name:e.name,email:e.email,role:e.role,reportsTo_text:e.reportsTo_text,department_text:e.department_text,userId:e.userId,created:e.created?new Date(e.created):void 0,updated:e.updated?new Date(e.updated):void 0,collectionId:e.collectionId,collectionName:e.collectionName,expand:e.expand}),n=async(e,t)=>{try{return(await (0,s.b)(()=>e.collection(r).getFullList({sort:"name",...t}),{...t,context:"fetching employees list"})).map(l)}catch(e){throw e}},o=async(e,t)=>{try{let a=await e.collection(r).create(t);return l(a)}catch(e){throw console.error("Failed to create employee:",e),e}},i=async(e,t,a)=>{try{let s=await e.collection(r).update(t,a);return l(s)}catch(e){throw console.error("Failed to update employee ".concat(t,":"),e),e}},d=async(e,t)=>{try{await e.collection(r).delete(t)}catch(e){throw console.error("Failed to delete employee ".concat(t,":"),e),e}}}},e=>{var t=t=>e(e.s=t);e.O(0,[143,644,52,524,521,483,267,556,441,303,358],()=>t(7454)),_N_E=e.O()}]);