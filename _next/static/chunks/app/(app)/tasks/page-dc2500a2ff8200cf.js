(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{14636:(e,t,r)=>{"use strict";r.d(t,{AM:()=>i,Wv:()=>o,hl:()=>c});var s=r(95155),a=r(12115),n=r(20547),l=r(59434);let i=n.bL,o=n.l9,c=a.forwardRef((e,t)=>{let{className:r,align:a="center",sideOffset:i=4,...o}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{ref:t,align:a,sideOffset:i,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...o})})});c.displayName=n.UC.displayName},20547:(e,t,r)=>{"use strict";r.d(t,{UC:()=>U,ZL:()=>J,bL:()=>q,l9:()=>V});var s=r(12115),a=r(85185),n=r(6101),l=r(46081),i=r(19178),o=r(92293),c=r(25519),d=r(61285),u=r(35152),h=r(34378),x=r(28905),p=r(63655),m=r(99708),f=r(5845),g=r(38168),v=r(93795),j=r(95155),y="Popover",[w,b]=(0,l.A)(y,[u.Bk]),C=(0,u.Bk)(),[k,N]=w(y),A=e=>{let{__scopePopover:t,children:r,open:a,defaultOpen:n,onOpenChange:l,modal:i=!1}=e,o=C(t),c=s.useRef(null),[h,x]=s.useState(!1),[p=!1,m]=(0,f.i)({prop:a,defaultProp:n,onChange:l});return(0,j.jsx)(u.bL,{...o,children:(0,j.jsx)(k,{scope:t,contentId:(0,d.B)(),triggerRef:c,open:p,onOpenChange:m,onOpenToggle:s.useCallback(()=>m(e=>!e),[m]),hasCustomAnchor:h,onCustomAnchorAdd:s.useCallback(()=>x(!0),[]),onCustomAnchorRemove:s.useCallback(()=>x(!1),[]),modal:i,children:r})})};A.displayName=y;var D="PopoverAnchor";s.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,n=N(D,r),l=C(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:o}=n;return s.useEffect(()=>(i(),()=>o()),[i,o]),(0,j.jsx)(u.Mz,{...l,...a,ref:t})}).displayName=D;var _="PopoverTrigger",P=s.forwardRef((e,t)=>{let{__scopePopover:r,...s}=e,l=N(_,r),i=C(r),o=(0,n.s)(t,l.triggerRef),c=(0,j.jsx)(p.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":B(l.open),...s,ref:o,onClick:(0,a.m)(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?c:(0,j.jsx)(u.Mz,{asChild:!0,...i,children:c})});P.displayName=_;var E="PopoverPortal",[T,R]=w(E,{forceMount:void 0}),O=e=>{let{__scopePopover:t,forceMount:r,children:s,container:a}=e,n=N(E,t);return(0,j.jsx)(T,{scope:t,forceMount:r,children:(0,j.jsx)(x.C,{present:r||n.open,children:(0,j.jsx)(h.Z,{asChild:!0,container:a,children:s})})})};O.displayName=E;var F="PopoverContent",M=s.forwardRef((e,t)=>{let r=R(F,e.__scopePopover),{forceMount:s=r.forceMount,...a}=e,n=N(F,e.__scopePopover);return(0,j.jsx)(x.C,{present:s||n.open,children:n.modal?(0,j.jsx)(S,{...a,ref:t}):(0,j.jsx)(L,{...a,ref:t})})});M.displayName=F;var S=s.forwardRef((e,t)=>{let r=N(F,e.__scopePopover),l=s.useRef(null),i=(0,n.s)(t,l),o=s.useRef(!1);return s.useEffect(()=>{let e=l.current;if(e)return(0,g.Eq)(e)},[]),(0,j.jsx)(v.A,{as:m.DX,allowPinchZoom:!0,children:(0,j.jsx)(I,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.m)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),o.current||null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:(0,a.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;o.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,a.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),L=s.forwardRef((e,t)=>{let r=N(F,e.__scopePopover),a=s.useRef(!1),n=s.useRef(!1);return(0,j.jsx)(I,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,l;null==(s=e.onCloseAutoFocus)||s.call(e,t),t.defaultPrevented||(a.current||null==(l=r.triggerRef.current)||l.focus(),t.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:t=>{var s,l;null==(s=e.onInteractOutside)||s.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let i=t.target;(null==(l=r.triggerRef.current)?void 0:l.contains(i))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),I=s.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:n,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:x,onInteractOutside:p,...m}=e,f=N(F,r),g=C(r);return(0,o.Oh)(),(0,j.jsx)(c.n,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:n,children:(0,j.jsx)(i.qW,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:p,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:x,onDismiss:()=>f.onOpenChange(!1),children:(0,j.jsx)(u.UC,{"data-state":B(f.open),role:"dialog",id:f.contentId,...g,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),z="PopoverClose";function B(e){return e?"open":"closed"}s.forwardRef((e,t)=>{let{__scopePopover:r,...s}=e,n=N(z,r);return(0,j.jsx)(p.sG.button,{type:"button",...s,ref:t,onClick:(0,a.m)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=z,s.forwardRef((e,t)=>{let{__scopePopover:r,...s}=e,a=C(r);return(0,j.jsx)(u.i3,{...a,...s,ref:t})}).displayName="PopoverArrow";var q=A,V=P,J=O,U=M},49478:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var s=r(95155),a=r(12115),n=r(30285),l=r(66695),i=r(85127),o=r(74466),c=r(59434);let d=(0,o.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function u(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,c.cn)(d({variant:r}),t),...a})}var h=r(44838),x=r(54165),p=r(17759),m=r(62523),f=r(88539),g=r(59409),v=r(14636),j=r(85511);let y=(0,r(40157).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var w=r(34301),b=r(50172),C=r(31949),k=r(3561),N=r(70154),A=r(58127),D=r(18763),_=r(77223),P=r(51920),E=r(59119),T=r(73168),R=r(6874),O=r.n(R),F=r(59576),M=r(77694),S=r(97841),L=r(87481),I=r(62177),z=r(90221),B=r(55594),q=r(91950);let V=e=>{if(!e)return"default";switch(e.toLowerCase()){case"urgent":case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"default"}},J=e=>{if(!e)return"default";switch(e.toLowerCase()){case"done":return"default";case"in progress":return"secondary";case"overdue":case"blocked":return"destructive";default:return"outline"}},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tasks",r="An unexpected error occurred while managing ".concat(t,".");if(e&&"object"==typeof e){if("status"in e&&0===e.status?r="Failed to load ".concat(t,": Could not connect to the server. Please check your internet connection and try again."):e.data&&"object"==typeof e.data&&e.data.message&&"string"==typeof e.data.message?r=e.data.message:e.message&&"string"==typeof e.message&&!e.message.startsWith("PocketBase_ClientResponseError")?r=e.message:e.originalError&&"string"==typeof e.originalError.message?r=e.originalError.message:e.message&&"string"==typeof e.message&&(r=e.message),"status"in e&&0!==e.status){let s=e.status,a=t.includes("employee")?"employees":"tasks";404===s?r="The ".concat(a," collection was not found (404). Original: ").concat(r):403===s&&(r="You do not have permission to manage ".concat(a," (403). Original: ").concat(r))}}else"string"==typeof e&&(r=e);return r},Y=B.Ik({title:B.Yj().min(1,"Title is required."),description:B.Yj().optional(),status:B.Yj().min(1,"Status is required."),priority:B.Yj().min(1,"Priority is required."),startDate:B.p6().optional(),dueDate:B.p6().optional(),recurrence:B.Yj().min(1,"Recurrence is required."),assignedTo_text:B.Yj().optional()});function $(){let{pbClient:e,user:t}=(0,F.A)(),{toast:r}=(0,L.dj)(),[o,c]=(0,a.useState)([]),[d,R]=(0,a.useState)(!0),[B,$]=(0,a.useState)(null),[G,H]=(0,a.useState)([]),[W,Z]=(0,a.useState)(!0),[X,K]=(0,a.useState)(null),[Q,ee]=(0,a.useState)(!1),[et,er]=(0,a.useState)(null),[es,ea]=(0,a.useState)(!1),en=(0,I.mN)({resolver:(0,z.u)(Y)}),el=(0,a.useCallback)(async(e,t)=>{if(!e)return void R(!1);R(!0),$(null);try{let r=await (0,M.x1)(e,{signal:t});c(r)}catch(s){let e=(null==s?void 0:s.isAbort)===!0||"string"==typeof(null==s?void 0:s.message)&&s.message.toLowerCase().includes("autocancelled"),t=(null==s?void 0:s.status)===0&&!e;if(e)console.warn("Tasks fetch request was ".concat((null==s?void 0:s.isAbort)?"aborted":"autocancelled","."),s);else if(t){let e=U(s,"tasks");$(e),r({title:"Error Loading Tasks",description:e,variant:"destructive"}),console.warn("Tasks fetch (network error):",e,s)}else{let e=U(s,"tasks");$(e),r({title:"Error Loading Tasks",description:e,variant:"destructive"}),console.warn("Error fetching tasks (after retries):",e,s)}}finally{R(!1)}},[r]),ei=(0,a.useCallback)(async(e,t)=>{if(!e)return void Z(!1);Z(!0),K(null);try{let r=await (0,S.Oc)(e,{signal:t});H(r)}catch(t){let e=(null==t?void 0:t.isAbort)===!0||"string"==typeof(null==t?void 0:t.message)&&t.message.toLowerCase().includes("autocancelled");if(e)console.warn("Fetch employees for task edit request was ".concat((null==t?void 0:t.isAbort)?"aborted":"autocancelled","."),t);else if((null==t?void 0:t.status)!==0||e){let e=U(t,"employees for task assignment");K(e),r({title:"Error Loading Employees",description:e,variant:"destructive"}),console.warn("Error fetching employees for task edit (after retries):",e,t)}else{let e=U(t,"employees for task assignment");K(e),r({title:"Error Loading Employees",description:e,variant:"destructive"}),console.warn("Fetch employees for task edit (network error):",e,t)}}finally{Z(!1)}},[r]);(0,a.useEffect)(()=>{let t=new AbortController;return e?(el(e,t.signal),ei(e,t.signal)):(R(!0),Z(!0)),()=>{t.abort()}},[e,el,ei]),(0,a.useEffect)(()=>{et&&en.reset({title:et.title,description:et.description||"",status:et.status,priority:et.priority,startDate:et.startDate?new Date(et.startDate):void 0,dueDate:et.dueDate?new Date(et.dueDate):void 0,recurrence:et.recurrence,assignedTo_text:et.assignedTo_text||""})},[et,en]);let eo=async(t,s)=>{if(!e)return void r({title:"Error",description:"Client not available.",variant:"destructive"});let a="Done"===s?"To Do":"Done";c(o.map(e=>e.id===t?{...e,status:a}:e));try{let s=await (0,M.lC)(e,t,{status:a});c(e=>e.map(e=>e.id===t?s:e)),r({title:"Success",description:"Task marked as ".concat(a,".")})}catch(e){console.warn("Error updating task status:",e),c(o),r({title:"Error",description:"Failed to update task status: ".concat(U(e)),variant:"destructive"})}},ec=async t=>{if(!e)return void r({title:"Error",description:"Client not available.",variant:"destructive"});let s=[...o];c(e=>e.filter(e=>e.id!==t));try{await (0,M.vq)(e,t),r({title:"Success",description:"Task deleted successfully."})}catch(e){console.warn("Error deleting task:",e),c(s),r({title:"Error",description:U(e),variant:"destructive"})}},ed=e=>{er(e),ee(!0)},eu=()=>{ee(!1),er(null),en.reset()},eh=async s=>{if(!et||!e||!t)return void r({title:"Error",description:"Editing context, client or user not available.",variant:"destructive"});ea(!0);let a={title:s.title,description:s.description,status:s.status,priority:s.priority,startDate:s.startDate,dueDate:s.dueDate,recurrence:s.recurrence,assignedTo_text:"__NONE__"!==s.assignedTo_text&&s.assignedTo_text?s.assignedTo_text:void 0,userId:t.id};try{let t=await (0,M.lC)(e,et.id,a);c(e=>e.map(e=>e.id===et.id?t:e)),r({title:"Success",description:"Task updated successfully."}),eu()}catch(e){console.warn("Failed to update task:",e),r({title:"Error Updating Task",description:U(e),variant:"destructive"})}finally{ea(!1)}},ex=d||W;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Task Management"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(n.$,{variant:"outline",children:[(0,s.jsx)(y,{className:"mr-2 h-4 w-4"})," Filter"]}),(0,s.jsx)(O(),{href:"/tasks/new",passHref:!0,children:(0,s.jsxs)(n.$,{children:[(0,s.jsx)(w.A,{className:"mr-2 h-4 w-4"})," Add Task"]})})]})]}),(0,s.jsxs)(l.Zp,{className:"shadow-md",children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{className:"font-headline",children:"All Tasks"}),(0,s.jsx)(l.BT,{children:"View, manage, and track all laboratory tasks."})]}),(0,s.jsxs)(l.Wu,{children:[ex&&(0,s.jsxs)("div",{className:"flex justify-center items-center py-10",children:[(0,s.jsx)(b.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ml-2",children:"Loading tasks and employee data..."})]}),B&&!ex&&(0,s.jsxs)("div",{className:"text-center py-10 text-destructive",children:[(0,s.jsx)(C.A,{className:"mx-auto h-12 w-12 text-destructive"}),(0,s.jsx)("p",{className:"mt-4 text-lg font-semibold",children:"Failed to Load Tasks"}),(0,s.jsx)("p",{className:"text-sm",children:B}),(0,s.jsx)(n.$,{onClick:()=>{e&&el(e,new AbortController().signal)},className:"mt-6",children:"Try Again"})]}),!ex&&!B&&0===o.length&&(0,s.jsx)("div",{className:"text-center py-10 text-muted-foreground",children:(0,s.jsx)("p",{children:"No tasks found. Get started by adding a new task!"})}),!ex&&!B&&o.length>0&&(0,s.jsxs)(i.XI,{children:[(0,s.jsx)(i.A0,{children:(0,s.jsxs)(i.Hj,{children:[(0,s.jsx)(i.nd,{children:"Title"}),(0,s.jsx)(i.nd,{children:"Status"}),(0,s.jsx)(i.nd,{children:"Priority"}),(0,s.jsx)(i.nd,{children:"Due Date"}),(0,s.jsx)(i.nd,{children:"Assigned To"}),(0,s.jsx)(i.nd,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(i.BF,{children:o.map(e=>(0,s.jsxs)(i.Hj,{className:"hover:bg-muted/50 transition-colors",children:[(0,s.jsx)(i.nA,{className:"font-medium",children:e.title}),(0,s.jsx)(i.nA,{children:(0,s.jsx)(u,{variant:J(e.status),children:e.status})}),(0,s.jsx)(i.nA,{children:(0,s.jsx)(u,{variant:V(e.priority),children:e.priority})}),(0,s.jsx)(i.nA,{children:e.dueDate?(0,T.GP)(new Date(e.dueDate),"MMM dd, yyyy"):"-"}),(0,s.jsx)(i.nA,{children:e.assignedTo_text||"-"}),(0,s.jsx)(i.nA,{className:"text-right",children:(0,s.jsxs)(h.rI,{children:[(0,s.jsx)(h.ty,{asChild:!0,children:(0,s.jsx)(n.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(k.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(h.SQ,{align:"end",children:[(0,s.jsxs)(h._2,{onClick:()=>eo(e.id,e.status),className:"flex items-center w-full",children:["Done"===e.status?(0,s.jsx)(N.A,{className:"mr-2 h-4 w-4"}):(0,s.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Done"===e.status?"Mark as To Do":"Mark as Done"]}),(0,s.jsxs)(h._2,{onClick:()=>ed(e),className:"flex items-center w-full",children:[(0,s.jsx)(D.A,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,s.jsxs)(h._2,{className:"text-destructive focus:text-destructive focus:bg-destructive/10",onClick:()=>ec(e.id),children:[(0,s.jsx)(_.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},e.id))})]})]})]}),et&&(0,s.jsx)(x.lG,{open:Q,onOpenChange:e=>{e?ee(!0):eu()},children:(0,s.jsxs)(x.Cf,{className:"sm:max-w-lg",children:[(0,s.jsxs)(x.c7,{children:[(0,s.jsxs)(x.L3,{className:"font-headline",children:["Edit Task: ",et.title]}),(0,s.jsx)(x.rr,{children:"Make changes to the task details below."})]}),(0,s.jsx)(p.lV,{...en,children:(0,s.jsxs)("form",{onSubmit:en.handleSubmit(eh),className:"space-y-4 py-4 max-h-[70vh] overflow-y-auto pr-2",children:[(0,s.jsx)(p.zB,{control:en.control,name:"title",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Title"}),(0,s.jsx)(p.MJ,{children:(0,s.jsx)(m.p,{...t})}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)(p.zB,{control:en.control,name:"description",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Description (Optional)"}),(0,s.jsx)(p.MJ,{children:(0,s.jsx)(f.T,{...t,placeholder:"Add any relevant details..."})}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(p.zB,{control:en.control,name:"status",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Status"}),(0,s.jsxs)(g.l6,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(p.MJ,{children:(0,s.jsx)(g.bq,{children:(0,s.jsx)(g.yv,{placeholder:"Select status"})})}),(0,s.jsx)(g.gC,{children:q.Hi.map(e=>(0,s.jsx)(g.eb,{value:e,children:e},e))})]}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)(p.zB,{control:en.control,name:"priority",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Priority"}),(0,s.jsxs)(g.l6,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(p.MJ,{children:(0,s.jsx)(g.bq,{children:(0,s.jsx)(g.yv,{placeholder:"Select priority"})})}),(0,s.jsx)(g.gC,{children:q.PN.map(e=>(0,s.jsx)(g.eb,{value:e,children:e},e))})]}),(0,s.jsx)(p.C5,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(p.zB,{control:en.control,name:"startDate",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{className:"flex flex-col",children:[(0,s.jsx)(p.lR,{children:"Start Date (Optional)"}),(0,s.jsxs)(v.AM,{children:[(0,s.jsx)(v.Wv,{asChild:!0,children:(0,s.jsx)(p.MJ,{children:(0,s.jsxs)(n.$,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,s.jsx)(P.A,{className:"mr-2 h-4 w-4"}),t.value?(0,T.GP)(t.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"})]})})}),(0,s.jsx)(v.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(j.V,{mode:"single",selected:t.value,onSelect:t.onChange,initialFocus:!0})})]}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)(p.zB,{control:en.control,name:"dueDate",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{className:"flex flex-col",children:[(0,s.jsx)(p.lR,{children:"Due Date (Optional)"}),(0,s.jsxs)(v.AM,{children:[(0,s.jsx)(v.Wv,{asChild:!0,children:(0,s.jsx)(p.MJ,{children:(0,s.jsxs)(n.$,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,s.jsx)(P.A,{className:"mr-2 h-4 w-4"}),t.value?(0,T.GP)(t.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"})]})})}),(0,s.jsx)(v.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(j.V,{mode:"single",selected:t.value,onSelect:t.onChange,initialFocus:!0})})]}),(0,s.jsx)(p.C5,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(p.zB,{control:en.control,name:"recurrence",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Recurrence"}),(0,s.jsxs)(g.l6,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(p.MJ,{children:(0,s.jsx)(g.bq,{children:(0,s.jsx)(g.yv,{placeholder:"Select recurrence"})})}),(0,s.jsx)(g.gC,{children:q.y4.map(e=>(0,s.jsx)(g.eb,{value:e,children:e},e))})]}),(0,s.jsx)(p.C5,{})]})}}),(0,s.jsx)(p.zB,{control:en.control,name:"assignedTo_text",render:e=>{let{field:t}=e;return(0,s.jsxs)(p.eI,{children:[(0,s.jsx)(p.lR,{children:"Assigned To (Optional)"}),(0,s.jsxs)(g.l6,{onValueChange:t.onChange,value:t.value||"__NONE__",disabled:W||!!X,children:[(0,s.jsx)(p.MJ,{children:(0,s.jsx)(g.bq,{children:(0,s.jsx)(g.yv,{placeholder:W?"Loading...":X?"Error":"Select employee"})})}),(0,s.jsxs)(g.gC,{children:[(0,s.jsx)(g.eb,{value:"__NONE__",children:"None"}),G.map(e=>(0,s.jsxs)(g.eb,{value:e.name,children:[e.name," (",e.role,")"]},e.id))]})]}),X&&!W&&(0,s.jsxs)("p",{className:"text-sm text-destructive mt-1 flex items-center",children:[(0,s.jsx)(C.A,{className:"h-4 w-4 mr-1"})," ",X]}),(0,s.jsx)(p.C5,{})]})}})]}),(0,s.jsxs)(x.Es,{children:[(0,s.jsx)(x.HM,{asChild:!0,children:(0,s.jsx)(n.$,{type:"button",variant:"outline",onClick:eu,disabled:es,children:"Cancel"})}),(0,s.jsxs)(n.$,{type:"submit",disabled:es||W,children:[es?(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(E.A,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})})]})})]})}},51920:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(40157).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},58127:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(40157).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},77694:(e,t,r)=>{"use strict";r.d(t,{UT:()=>i,lC:()=>o,vq:()=>c,x1:()=>l});var s=r(30645);let a="tasks",n=e=>({...e,startDate:e.startDate?new Date(e.startDate):void 0,dueDate:e.dueDate?new Date(e.dueDate):void 0,created:new Date(e.created),updated:new Date(e.updated)}),l=async(e,t)=>{try{return(await (0,s.b)(()=>e.collection(a).getFullList({sort:"-created",...t}),{...t,context:"fetching tasks list"})).map(n)}catch(e){throw e}},i=async(e,t)=>{try{let r=await e.collection(a).create(t);return n(r)}catch(e){throw console.error("Failed to create task:",e),e}},o=async(e,t,r)=>{try{let s=await e.collection(a).update(t,r);return n(s)}catch(e){throw console.error("Failed to update task ".concat(t,":"),e),e}},c=async(e,t)=>{try{await e.collection(a).delete(t)}catch(e){throw console.error("Failed to delete task ".concat(t,":"),e),e}}},82159:(e,t,r)=>{Promise.resolve().then(r.bind(r,49478))},85511:(e,t,r)=>{"use strict";r.d(t,{V:()=>c});var s=r(95155);r(12115);var a=r(965),n=r(73158),l=r(71499),i=r(59434),o=r(30285);function c(e){let{className:t,classNames:r,showOutsideDays:c=!0,...d}=e;return(0,s.jsx)(l.hv,{showOutsideDays:c,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{className:t,...r}=e;return(0,s.jsx)(a.A,{className:(0,i.cn)("h-4 w-4",t),...r})},IconRight:e=>{let{className:t,...r}=e;return(0,s.jsx)(n.A,{className:(0,i.cn)("h-4 w-4",t),...r})}},...d})}c.displayName="Calendar"},88539:(e,t,r)=>{"use strict";r.d(t,{T:()=>l});var s=r(95155),a=r(12115),n=r(59434);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});l.displayName="Textarea"},91950:(e,t,r)=>{"use strict";r.d(t,{C3:()=>l,Hi:()=>s,PN:()=>a,y4:()=>n});let s=["To Do","In Progress","Blocked","Done","Overdue"],a=["Low","Medium","High","Urgent"],n=["None","Daily","Weekly","Monthly","Yearly"],l="LabFlow"}},e=>{var t=t=>e(e.s=t);e.O(0,[143,897,52,977,198,483,874,532,812,556,710,441,303,358],()=>t(82159)),_N_E=e.O()}]);