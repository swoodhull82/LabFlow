(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{14636:(e,t,s)=>{"use strict";s.d(t,{AM:()=>i,Wv:()=>d,hl:()=>c});var a=s(95155),r=s(12115),n=s(20547),l=s(59434);let i=n.bL,d=n.l9,c=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:i=4,...d}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsx)(n.UC,{ref:t,align:r,sideOffset:i,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...d})})});c.displayName=n.UC.displayName},47262:(e,t,s)=>{"use strict";s.d(t,{S:()=>d});var a=s(95155),r=s(12115),n=s(76981),l=s(10518),i=s(59434);let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.bL,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,a.jsx)(n.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})})});d.displayName=n.bL.displayName},49478:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});var a=s(95155),r=s(12115),n=s(30285),l=s(66695),i=s(85127),d=s(74466),c=s(59434);let o=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function u(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,c.cn)(o({variant:s}),t),...r})}var h=s(44838),x=s(54165),m=s(17759),p=s(62523),f=s(88539),j=s(59409),g=s(14636),v=s(85511),y=s(47262),b=s(66424);let w=(0,s(40157).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var N=s(34301),k=s(50172),C=s(31949),A=s(3561),D=s(70154),_=s(58127),T=s(18763),E=s(77223),S=s(51920),L=s(86318),M=s(59119),F=s(73168),O=s(6874),P=s.n(O),R=s(59576),z=s(77694),I=s(97841),B=s(87481),q=s(62177),V=s(90221),Y=s(55594),$=s(91950);let J=e=>{if(!e)return"default";switch(e.toLowerCase()){case"urgent":case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"default"}},H=e=>{if(!e)return"default";switch(e.toLowerCase()){case"done":return"default";case"in progress":return"secondary";case"overdue":case"blocked":return"destructive";default:return"outline"}},W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tasks",s="An unexpected error occurred while managing ".concat(t,".");if(e&&"object"==typeof e){if("status"in e&&0===e.status?s="Failed to load ".concat(t,": Could not connect to the server. Please check your internet connection and try again."):e.data&&"object"==typeof e.data&&e.data.message&&"string"==typeof e.data.message?s=e.data.message:e.message&&"string"==typeof e.message&&!e.message.startsWith("PocketBase_ClientResponseError")?s=e.message:e.originalError&&"string"==typeof e.originalError.message?s=e.originalError.message:e.message&&"string"==typeof e.message&&(s=e.message),"status"in e&&0!==e.status){let a=e.status,r=t.includes("employee")?"employees":(t.includes("dependency"),"tasks");404===a?s="The ".concat(r," collection was not found (404). Original: ").concat(s):403===a&&(s="You do not have permission to manage ".concat(r," (403). Original: ").concat(s))}}else"string"==typeof e&&(s=e);return s},G=Y.Ik({title:Y.Yj().min(1,"Title is required."),description:Y.Yj().optional(),status:Y.Yj().min(1,"Status is required."),priority:Y.Yj().min(1,"Priority is required."),startDate:Y.p6().optional(),dueDate:Y.p6().optional(),recurrence:Y.Yj().min(1,"Recurrence is required."),assignedTo_text:Y.Yj().optional(),dependencies:Y.YO(Y.Yj()).optional()});function U(){let{pbClient:e,user:t}=(0,R.A)(),{toast:s}=(0,B.dj)(),[d,c]=(0,r.useState)([]),[o,O]=(0,r.useState)(!0),[Y,U]=(0,r.useState)(null),[Z,K]=(0,r.useState)([]),[Q,X]=(0,r.useState)(!0),[ee,et]=(0,r.useState)(null),[es,ea]=(0,r.useState)([]),[er,en]=(0,r.useState)(!0),[el,ei]=(0,r.useState)(null),[ed,ec]=(0,r.useState)(!1),[eo,eu]=(0,r.useState)(!1),[eh,ex]=(0,r.useState)(null),[em,ep]=(0,r.useState)(!1),ef=(0,q.mN)({resolver:(0,V.u)(G),defaultValues:{dependencies:[]}}),ej=(0,r.useCallback)(async(e,t)=>{if(!e)return void O(!1);O(!0),U(null);try{let s=await (0,z.x1)(e,{signal:t});c(s)}catch(a){let e=(null==a?void 0:a.isAbort)===!0||"string"==typeof(null==a?void 0:a.message)&&a.message.toLowerCase().includes("autocancelled"),t=(null==a?void 0:a.status)===0&&!e;if(e)console.warn("Tasks fetch request was ".concat((null==a?void 0:a.isAbort)?"aborted":"autocancelled","."),a);else if(t){let e=W(a,"tasks");U(e),s({title:"Error Loading Tasks",description:e,variant:"destructive"}),console.warn("Tasks fetch (network error):",e,a)}else{let e=W(a,"tasks");U(e),s({title:"Error Loading Tasks",description:e,variant:"destructive"}),console.warn("Error fetching tasks (after retries):",e,a)}}finally{O(!1)}},[s]),eg=(0,r.useCallback)(async(e,t)=>{if(!e)return void X(!1);X(!0),et(null);try{let s=await (0,I.Oc)(e,{signal:t});K(s)}catch(t){let e=(null==t?void 0:t.isAbort)===!0||"string"==typeof(null==t?void 0:t.message)&&t.message.toLowerCase().includes("autocancelled");if(e)console.warn("Fetch employees for task edit request was ".concat((null==t?void 0:t.isAbort)?"aborted":"autocancelled","."),t);else if((null==t?void 0:t.status)!==0||e){let e=W(t,"employees for task assignment");et(e),s({title:"Error Loading Employees",description:e,variant:"destructive"}),console.warn("Error fetching employees for task edit (after retries):",e,t)}else{let e=W(t,"employees for task assignment");et(e),s({title:"Error Loading Employees",description:e,variant:"destructive"}),console.warn("Fetch employees for task edit (network error):",e,t)}}finally{X(!1)}},[s]),ev=(0,r.useCallback)(async(e,t,a)=>{if(!e)return void en(!1);en(!0),ei(null);try{let s=await (0,z.x1)(e,{signal:a});ea(t?s.filter(e=>e.id!==t):s)}catch(a){let e=(null==a?void 0:a.isAbort)===!0||"string"==typeof(null==a?void 0:a.message)&&a.message.toLowerCase().includes("autocancelled"),t=(null==a?void 0:a.status)===0&&!e;if(e)console.warn("Fetch tasks for edit dependency selection request was ".concat((null==a?void 0:a.isAbort)?"aborted":"autocancelled","."),a);else if(t){let e=W(a,"tasks for dependency selection (edit)");ei(e),s({title:"Error Loading Tasks for Dependencies",description:e,variant:"destructive"}),console.warn("Fetch tasks for edit dependency selection (network error):",e,a)}else{let e=W(a,"tasks for dependency selection (edit)");ei(e),s({title:"Error Loading Tasks for Dependencies",description:e,variant:"destructive"}),console.warn("Error fetching tasks for edit dependency selection (after retries):",e,a)}}finally{en(!1)}},[s]);(0,r.useEffect)(()=>{let t=new AbortController;return e?(ej(e,t.signal),eg(e,t.signal)):(O(!0),X(!0)),()=>{t.abort()}},[e,ej,eg]),(0,r.useEffect)(()=>{if(eo&&eh&&e){let t=new AbortController;return ev(e,eh.id,t.signal),()=>t.abort()}},[eo,eh,e,ev]),(0,r.useEffect)(()=>{eh&&ef.reset({title:eh.title,description:eh.description||"",status:eh.status,priority:eh.priority,startDate:eh.startDate?new Date(eh.startDate):void 0,dueDate:eh.dueDate?new Date(eh.dueDate):void 0,recurrence:eh.recurrence,assignedTo_text:eh.assignedTo_text||"",dependencies:Array.isArray(eh.dependencies)?eh.dependencies:[]})},[eh,ef]);let ey=async(t,a)=>{if(!e)return void s({title:"Error",description:"Client not available.",variant:"destructive"});let r="Done"===a?"To Do":"Done";c(d.map(e=>e.id===t?{...e,status:r}:e));try{let a=await (0,z.lC)(e,t,{status:r});c(e=>e.map(e=>e.id===t?a:e)),s({title:"Success",description:"Task marked as ".concat(r,".")})}catch(e){console.warn("Error updating task status:",e),c(d),s({title:"Error",description:"Failed to update task status: ".concat(W(e)),variant:"destructive"})}},eb=async t=>{if(!e)return void s({title:"Error",description:"Client not available.",variant:"destructive"});let a=[...d];c(e=>e.filter(e=>e.id!==t));try{await (0,z.vq)(e,t),s({title:"Success",description:"Task deleted successfully."})}catch(e){console.warn("Error deleting task:",e),c(a),s({title:"Error",description:W(e),variant:"destructive"})}},ew=e=>{ex(e),eu(!0)},eN=()=>{eu(!1),ex(null),ef.reset(),ea([]),ec(!1)},ek=async a=>{if(!eh||!e||!t)return void s({title:"Error",description:"Editing context, client or user not available.",variant:"destructive"});ep(!0);let r={title:a.title,description:a.description,status:a.status,priority:a.priority,startDate:a.startDate,dueDate:a.dueDate,recurrence:a.recurrence,assignedTo_text:"__NONE__"!==a.assignedTo_text&&a.assignedTo_text?a.assignedTo_text:void 0,dependencies:a.dependencies||[],userId:t.id};try{let t=await (0,z.lC)(e,eh.id,r);c(e=>e.map(e=>e.id===eh.id?t:e)),s({title:"Success",description:"Task updated successfully."}),eN()}catch(e){console.warn("Failed to update task:",e),s({title:"Error Updating Task",description:W(e),variant:"destructive"})}finally{ep(!1)}},eC=o||Q;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Task Management"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(n.$,{variant:"outline",children:[(0,a.jsx)(w,{className:"mr-2 h-4 w-4"})," Filter"]}),(0,a.jsx)(P(),{href:"/tasks/new",passHref:!0,children:(0,a.jsxs)(n.$,{children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Add Task"]})})]})]}),(0,a.jsxs)(l.Zp,{className:"shadow-md",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{className:"font-headline",children:"All Tasks"}),(0,a.jsx)(l.BT,{children:"View, manage, and track all laboratory tasks."})]}),(0,a.jsxs)(l.Wu,{children:[eC&&(0,a.jsxs)("div",{className:"flex justify-center items-center py-10",children:[(0,a.jsx)(k.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"ml-2",children:"Loading tasks and employee data..."})]}),Y&&!eC&&(0,a.jsxs)("div",{className:"text-center py-10 text-destructive",children:[(0,a.jsx)(C.A,{className:"mx-auto h-12 w-12 text-destructive"}),(0,a.jsx)("p",{className:"mt-4 text-lg font-semibold",children:"Failed to Load Tasks"}),(0,a.jsx)("p",{className:"text-sm",children:Y}),(0,a.jsx)(n.$,{onClick:()=>{e&&ej(e,new AbortController().signal)},className:"mt-6",children:"Try Again"})]}),!eC&&!Y&&0===d.length&&(0,a.jsx)("div",{className:"text-center py-10 text-muted-foreground",children:(0,a.jsx)("p",{children:"No tasks found. Get started by adding a new task!"})}),!eC&&!Y&&d.length>0&&(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nd,{children:"Title"}),(0,a.jsx)(i.nd,{children:"Status"}),(0,a.jsx)(i.nd,{children:"Priority"}),(0,a.jsx)(i.nd,{children:"Due Date"}),(0,a.jsx)(i.nd,{children:"Assigned To"}),(0,a.jsx)(i.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:d.map(e=>(0,a.jsxs)(i.Hj,{className:"hover:bg-muted/50 transition-colors",children:[(0,a.jsx)(i.nA,{className:"font-medium",children:e.title}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(u,{variant:H(e.status),children:e.status})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(u,{variant:J(e.priority),children:e.priority})}),(0,a.jsx)(i.nA,{children:e.dueDate?(0,F.GP)(new Date(e.dueDate),"MMM dd, yyyy"):"-"}),(0,a.jsx)(i.nA,{children:e.assignedTo_text||"-"}),(0,a.jsx)(i.nA,{className:"text-right",children:(0,a.jsxs)(h.rI,{children:[(0,a.jsx)(h.ty,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(h.SQ,{align:"end",children:[(0,a.jsxs)(h._2,{onClick:()=>ey(e.id,e.status),className:"flex items-center w-full",children:["Done"===e.status?(0,a.jsx)(D.A,{className:"mr-2 h-4 w-4"}):(0,a.jsx)(_.A,{className:"mr-2 h-4 w-4"}),"Done"===e.status?"Mark as To Do":"Mark as Done"]}),(0,a.jsxs)(h._2,{onClick:()=>ew(e),className:"flex items-center w-full",children:[(0,a.jsx)(T.A,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,a.jsxs)(h._2,{className:"text-destructive focus:text-destructive focus:bg-destructive/10",onClick:()=>eb(e.id),children:[(0,a.jsx)(E.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},e.id))})]})]})]}),eh&&(0,a.jsx)(x.lG,{open:eo,onOpenChange:e=>{e?eu(!0):eN()},children:(0,a.jsxs)(x.Cf,{className:"sm:max-w-lg",children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsxs)(x.L3,{className:"font-headline",children:["Edit Task: ",eh.title]}),(0,a.jsx)(x.rr,{children:"Make changes to the task details below."})]}),(0,a.jsx)(m.lV,{...ef,children:(0,a.jsxs)("form",{onSubmit:ef.handleSubmit(ek),className:"space-y-4 py-4 max-h-[70vh] overflow-y-auto pr-2",children:[(0,a.jsx)(m.zB,{control:ef.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Title"}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(p.p,{...t})}),(0,a.jsx)(m.C5,{})]})}}),(0,a.jsx)(m.zB,{control:ef.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Description (Optional)"}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(f.T,{...t,placeholder:"Add any relevant details..."})}),(0,a.jsx)(m.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(m.zB,{control:ef.control,name:"status",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Status"}),(0,a.jsxs)(j.l6,{onValueChange:t.onChange,value:t.value,children:[(0,a.jsx)(m.MJ,{children:(0,a.jsx)(j.bq,{children:(0,a.jsx)(j.yv,{placeholder:"Select status"})})}),(0,a.jsx)(j.gC,{children:$.Hi.map(e=>(0,a.jsx)(j.eb,{value:e,children:e},e))})]}),(0,a.jsx)(m.C5,{})]})}}),(0,a.jsx)(m.zB,{control:ef.control,name:"priority",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Priority"}),(0,a.jsxs)(j.l6,{onValueChange:t.onChange,value:t.value,children:[(0,a.jsx)(m.MJ,{children:(0,a.jsx)(j.bq,{children:(0,a.jsx)(j.yv,{placeholder:"Select priority"})})}),(0,a.jsx)(j.gC,{children:$.PN.map(e=>(0,a.jsx)(j.eb,{value:e,children:e},e))})]}),(0,a.jsx)(m.C5,{})]})}})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(m.zB,{control:ef.control,name:"startDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.eI,{className:"flex flex-col",children:[(0,a.jsx)(m.lR,{children:"Start Date (Optional)"}),(0,a.jsxs)(g.AM,{children:[(0,a.jsx)(g.Wv,{asChild:!0,children:(0,a.jsx)(m.MJ,{children:(0,a.jsxs)(n.$,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4"}),t.value?(0,F.GP)(t.value,"PPP"):(0,a.jsx)("span",{children:"Pick a date"})]})})}),(0,a.jsx)(g.hl,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(v.V,{mode:"single",selected:t.value,onSelect:t.onChange,initialFocus:!0})})]}),(0,a.jsx)(m.C5,{})]})}}),(0,a.jsx)(m.zB,{control:ef.control,name:"dueDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.eI,{className:"flex flex-col",children:[(0,a.jsx)(m.lR,{children:"Due Date (Optional)"}),(0,a.jsxs)(g.AM,{children:[(0,a.jsx)(g.Wv,{asChild:!0,children:(0,a.jsx)(m.MJ,{children:(0,a.jsxs)(n.$,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4"}),t.value?(0,F.GP)(t.value,"PPP"):(0,a.jsx)("span",{children:"Pick a date"})]})})}),(0,a.jsx)(g.hl,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(v.V,{mode:"single",selected:t.value,onSelect:t.onChange,initialFocus:!0})})]}),(0,a.jsx)(m.C5,{})]})}})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(m.zB,{control:ef.control,name:"recurrence",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Recurrence"}),(0,a.jsxs)(j.l6,{onValueChange:t.onChange,value:t.value,children:[(0,a.jsx)(m.MJ,{children:(0,a.jsx)(j.bq,{children:(0,a.jsx)(j.yv,{placeholder:"Select recurrence"})})}),(0,a.jsx)(j.gC,{children:$.y4.map(e=>(0,a.jsx)(j.eb,{value:e,children:e},e))})]}),(0,a.jsx)(m.C5,{})]})}}),(0,a.jsx)(m.zB,{control:ef.control,name:"assignedTo_text",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Assigned To (Optional)"}),(0,a.jsxs)(j.l6,{onValueChange:t.onChange,value:t.value||"__NONE__",disabled:Q||!!ee,children:[(0,a.jsx)(m.MJ,{children:(0,a.jsx)(j.bq,{children:(0,a.jsx)(j.yv,{placeholder:Q?"Loading...":ee?"Error":"Select employee"})})}),(0,a.jsxs)(j.gC,{children:[(0,a.jsx)(j.eb,{value:"__NONE__",children:"None"}),Z.map(e=>(0,a.jsxs)(j.eb,{value:e.name,children:[e.name," (",e.role,")"]},e.id))]})]}),ee&&!Q&&(0,a.jsxs)("p",{className:"text-sm text-destructive mt-1 flex items-center",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-1"})," ",ee]}),(0,a.jsx)(m.C5,{})]})}})]}),(0,a.jsx)(m.zB,{control:ef.control,name:"dependencies",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Dependencies (Optional)"}),(0,a.jsxs)(g.AM,{open:ed,onOpenChange:ec,children:[(0,a.jsx)(g.Wv,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",className:"w-full justify-start text-left font-normal",disabled:er||!!el,children:[(0,a.jsx)(L.A,{className:"mr-2 h-4 w-4"}),er?"Loading tasks...":el?"Error loading tasks":t.value&&t.value.length>0?"".concat(t.value.length," selected"):"Select tasks"]})}),(0,a.jsxs)(g.hl,{className:"w-[--radix-popover-trigger-width] p-0",children:[er?(0,a.jsx)("div",{className:"p-4 text-center text-sm",children:"Loading tasks..."}):el?(0,a.jsx)("div",{className:"p-4 text-center text-sm text-destructive",children:el}):0===es.length?(0,a.jsx)("div",{className:"p-4 text-center text-sm",children:"No other tasks available to select."}):(0,a.jsx)(b.F,{className:"h-48",children:(0,a.jsx)("div",{className:"p-4 space-y-2",children:es.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y.S,{id:"edit-dep-".concat(e.id),checked:null==(s=t.value)?void 0:s.includes(e.id),onCheckedChange:s=>{let a=t.value||[];return s?t.onChange([...a,e.id]):t.onChange(a.filter(t=>t!==e.id))}}),(0,a.jsx)("label",{htmlFor:"edit-dep-".concat(e.id),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 truncate",title:e.title,children:e.title})]},e.id)})})}),(0,a.jsx)("div",{className:"p-2 border-t",children:(0,a.jsx)(n.$,{size:"sm",className:"w-full",onClick:()=>ec(!1),children:"Done"})})]})]}),(0,a.jsx)(m.C5,{})]})}}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(x.HM,{asChild:!0,children:(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:eN,disabled:em,children:"Cancel"})}),(0,a.jsxs)(n.$,{type:"submit",disabled:em||Q||er,children:[em?(0,a.jsx)(k.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(M.A,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})})]})})]})}},58127:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},66424:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var a=s(95155),r=s(12115),n=s(47655),l=s(59434);let i=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(n.bL,{ref:t,className:(0,l.cn)("relative overflow-hidden",s),...i,children:[(0,a.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(d,{}),(0,a.jsx)(n.OK,{})]})});i.displayName=n.bL.displayName;let d=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...i}=e;return(0,a.jsx)(n.VM,{ref:t,orientation:r,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...i,children:(0,a.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=n.VM.displayName},77694:(e,t,s)=>{"use strict";s.d(t,{UT:()=>i,lC:()=>d,vq:()=>c,x1:()=>l});var a=s(30645);let r="tasks",n=e=>({...e,startDate:e.startDate?new Date(e.startDate):void 0,dueDate:e.dueDate?new Date(e.dueDate):void 0,created:new Date(e.created),updated:new Date(e.updated),dependencies:Array.isArray(e.dependencies)?e.dependencies:[]}),l=async(e,t)=>{try{return(await (0,a.b)(()=>e.collection(r).getFullList({sort:"-created",...t}),{...t,context:"fetching tasks list"})).map(n)}catch(e){throw e}},i=async(e,t)=>{try{let s=await e.collection(r).create(t);return n(s)}catch(e){throw console.error("Failed to create task:",e),e}},d=async(e,t,s)=>{try{s instanceof FormData||!s.dependencies||Array.isArray(s.dependencies);let a=await e.collection(r).update(t,s);return n(a)}catch(e){throw console.error("Failed to update task ".concat(t,":"),e),e}},c=async(e,t)=>{try{await e.collection(r).delete(t)}catch(e){throw console.error("Failed to delete task ".concat(t,":"),e),e}}},82159:(e,t,s)=>{Promise.resolve().then(s.bind(s,49478))},85511:(e,t,s)=>{"use strict";s.d(t,{V:()=>c});var a=s(95155);s(12115);var r=s(965),n=s(73158),l=s(86374),i=s(59434),d=s(30285);function c(e){let{className:t,classNames:s,showOutsideDays:c=!0,...o}=e;return(0,a.jsx)(l.hv,{showOutsideDays:c,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,d.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,d.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{className:t,...s}=e;return(0,a.jsx)(r.A,{className:(0,i.cn)("h-4 w-4",t),...s})},IconRight:e=>{let{className:t,...s}=e;return(0,a.jsx)(n.A,{className:(0,i.cn)("h-4 w-4",t),...s})}},...o})}c.displayName="Calendar"},88539:(e,t,s)=>{"use strict";s.d(t,{T:()=>l});var a=s(95155),r=s(12115),n=s(59434);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});l.displayName="Textarea"},91950:(e,t,s)=>{"use strict";s.d(t,{C3:()=>l,Hi:()=>a,PN:()=>r,y4:()=>n});let a=["To Do","In Progress","Blocked","Done","Overdue"],r=["Low","Medium","High","Urgent"],n=["None","Daily","Weekly","Monthly","Yearly"],l="LabFlow"}},e=>{var t=t=>e(e.s=t);e.O(0,[143,897,52,977,198,477,874,767,812,901,556,710,441,303,358],()=>t(82159)),_N_E=e.O()}]);