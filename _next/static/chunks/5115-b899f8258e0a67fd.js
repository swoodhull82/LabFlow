"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5115],{14209:(e,t,r)=>{r.d(t,{E5:()=>x,g6:()=>v,n:()=>h,yf:()=>p});var a=r(7140),n=r(30645),l=r(44861),o=r(70831),s=r(96019),c=r(78039),i=r(86622),d=r(63482);let u="personal_events",f=(e,t)=>{if(e instanceof a.fp){var r;if(404===e.status)throw Error("Cannot create item: The '".concat(t,"' collection does not exist. Please create it in your PocketBase admin panel."));if(400===e.status&&(null==(r=e.data)?void 0:r.data)){if(e.data.data.id&&e.data.data.id.message)throw Error("There seems to be a configuration issue with your '".concat(t,"' collection. The server is asking for an 'id', which should be automatically generated. Please check in your PocketBase admin panel that the 'id' field is the default system field and not a required text field you created."));let r=Object.entries(e.data.data).map(e=>{let[t,r]=e;return"".concat(t,": ").concat(r.message)}).join("; ");throw Error("Validation failed. Server says: ".concat(r))}}throw console.error("Failed to create item in ".concat(t,":"),e),e},m=e=>{var t,r;let a=e.startDate?new Date(e.startDate):null,n=e.endDate?new Date(e.endDate):null;if(!a||!n||!(0,l.f)(a)||!(0,l.f)(n))return console.warn("[personalEventService] Skipping event with ID ".concat(e.id," due to missing or invalid dates.")),null;let o=null==(t=e.expand)?void 0:t.userId,s=null==(r=e.expand)?void 0:r.employeeId;return{id:e.id,title:e.title,startDate:a,endDate:n,description:e.description,priority:e.priority,userId:e.userId,employeeId:e.employeeId,isAllDay:e.isAllDay||!1,eventType:e.eventType||"Available",recurrence:e.recurrence||"None",created:new Date(e.created),updated:new Date(e.updated),collectionId:e.collectionId,collectionName:e.collectionName,ownerId:null==o?void 0:o.id,ownerName:(null==s?void 0:s.name)||(null==o?void 0:o.name),expand:e.expand}},p=async(e,t,r)=>{var l;if(!t&&(null==(l=e.authStore.model)?void 0:l.role)!=="Supervisor")return console.warn("[personalEventService] getPersonalEvents called without a userId for a non-supervisor. Returning empty array."),[];try{let{signal:a,projectionHorizon:l,...f}=r||{},p={sort:"startDate",expand:"userId,employeeId",...f};t&&(p.filter='(userId = "'.concat(t,'" || employeeId.userId = "').concat(t,'")'));let h=(await (0,n.b)(()=>e.collection(u).getFullList(p,{signal:a}),{...r,context:"fetching personal events"})).map(e=>m(e)).filter(e=>null!==e);if(l)return function(e,t){let r=[];return e.forEach(e=>{if(r.push(e),"None"===e.recurrence||!e.endDate)return;let a=new Date(e.endDate),n=new Date(e.endDate).getTime()-new Date(e.startDate).getTime(),l=1;for(;;){let u=new Date(a);switch(e.recurrence){case"Daily":a=(0,o.f)(u,1);break;case"Weekly":a=(0,s.J)(u,1);break;case"Monthly":a=(0,c.P)(u,1);break;case"Yearly":a=(0,i.e)(u,1);break;default:return}if((0,d.Y)(a,t)){let t=new Date(a.getTime()-n),o={...e,id:"".concat(e.id,"_proj_").concat(l),startDate:t,endDate:a,description:"Recurring instance of: ".concat(e.title)};r.push(o),l++}else break}}),r}(h,l);return h}catch(e){if((null==e?void 0:e.isAbort)===!0||(null==e?void 0:e.message)&&(e.message.toLowerCase().includes("aborted")||e.message.toLowerCase().includes("autocancelled")))throw e;if(e instanceof a.fp&&404===e.status)return console.warn("[personalEventService] The '".concat(u,"' collection was not found. Returning empty array. Please create it in PocketBase.")),[];throw console.error("Failed to fetch personal events:",e),e}},h=async(e,t,r)=>{try{let a=await (0,n.b)(()=>e.collection(u).create(t),{context:"creating personal event",signal:null==r?void 0:r.signal}),l=m(a);if(!l)throw Error("Failed to process the created event record.");return l}catch(e){throw f(e,u),e}},x=async(e,t,r)=>{try{let a=await (0,n.b)(()=>e.collection(u).update(t,r),{context:"updating personal event ".concat(t)}),l=m(a);if(!l)throw Error("Failed to process the updated event record.");return l}catch(e){throw console.error("Failed to update personal event ".concat(t,":"),e),f(e,u),e}},v=async(e,t)=>{try{await (0,n.b)(()=>e.collection(u).delete(t),{context:"deleting personal event ".concat(t)})}catch(e){if(console.error("Failed to delete personal event ".concat(t,":"),e),e instanceof a.fp&&404===e.status)return void console.warn("Attempted to delete non-existent personal event ".concat(t));throw e}}},16303:(e,t,r)=>{r.d(t,{A:()=>g});var a=r(95155),n=r(12115),l=r(19616),o=r(36506),s=r(17132),c=r(7860),i=r(92266),d=r(73168),u=r(44861),f=r(15667),m=r(9208),p=r(59434),h=r(91721);let x=Array.from({length:9},(e,t)=>{let r=t+7;return 12===r?"12 PM":r>12?"".concat(r-12," PM"):"".concat(r," AM")}),v=e=>{if(e.color)return"text-white border-l-4";switch(e.eventType){case"Out of Office":return"border-green-500 bg-green-50 text-green-900 dark:bg-green-900/20 dark:border-green-500/70 dark:text-green-100";case"Busy":return"border-orange-500 bg-orange-50 text-orange-900 dark:bg-orange-900/20 dark:border-orange-500/70 dark:text-orange-100";default:return"border-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-900/20 dark:border-blue-500/70 dark:text-blue-100"}},y=e=>{let{dayColumns:t}=e,[r,c]=(0,n.useState)(new Date),i=t.findIndex(e=>(0,l.c)(e));if((0,n.useEffect)(()=>{let e=setInterval(()=>{c(new Date)},6e4);return()=>clearInterval(e)},[]),-1===i)return null;let d=(0,o.q)(r)+(0,s.O)(r)/60-7;return d<0||d>9?null:(0,a.jsx)("div",{className:"absolute z-10 pointer-events-none",style:{left:"calc(".concat(20*i,"%)"),width:"20%",top:"".concat(60*d,"px")},children:(0,a.jsx)("div",{className:"relative h-px bg-destructive w-full",children:(0,a.jsx)("div",{className:"absolute -left-1.5 -top-1.5 h-3 w-3 rounded-full bg-destructive border-2 border-background"})})})};function g(e){let{events:t,weekStartDate:r,onHourSlotClick:g,onEventClick:b,isTeamView:w=!1}=e,N=(0,n.useRef)(null),D=(0,n.useRef)(null);(0,n.useEffect)(()=>{N.current&&(N.current.scrollTop=60)},[]),(0,n.useEffect)(()=>{let e=N.current,t=D.current;if(!e||!t)return;let r=()=>{t.scrollTop=e.scrollTop};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)},[]);let j=(0,n.useMemo)(()=>(0,c.k)({start:r,end:(0,i.W)(r,{days:4})}),[r]),E=(0,n.useMemo)(()=>{let e=new Map;return j.forEach(t=>{e.set((0,d.GP)(t,"yyyy-MM-dd"),[])}),t.forEach(t=>{if(t.startDate){let a=new Date(t.startDate);if(!(0,u.f)(a))return;let n=(0,d.GP)(a,"yyyy-MM-dd");if(e.has(n)){var r;null==(r=e.get(n))||r.push(t)}}}),e.forEach(e=>{e.sort((e,t)=>new Date(e.startDate).getTime()-new Date(t.startDate).getTime())}),e},[t,j]);return(0,a.jsx)("div",{className:"flex flex-col h-[calc(100vh-270px)]",children:(0,a.jsxs)("div",{className:"flex flex-grow min-h-0",children:[(0,a.jsxs)("div",{className:"w-20 text-sm text-right flex-shrink-0",children:[(0,a.jsx)("div",{className:"h-20"})," ",(0,a.jsx)("div",{ref:D,className:"overflow-hidden",style:{height:"calc(100% - 5rem)"},children:x.map((e,t)=>(0,a.jsx)("div",{className:"relative pr-2",style:{height:"".concat(60,"px")},children:(0,a.jsx)("span",{className:(0,p.cn)("absolute right-2 text-muted-foreground",0===t?"top-0":"-top-2.5"),children:e})},e))})]}),(0,a.jsxs)("div",{className:"flex-grow overflow-hidden relative",children:[(0,a.jsx)("div",{className:"grid grid-cols-5 sticky top-0 bg-card z-20 border-b",children:j.map(e=>(0,a.jsxs)("div",{className:"h-20 flex flex-col items-center justify-center border-l py-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:(0,d.GP)(e,"EEE")}),(0,a.jsx)("div",{className:(0,p.cn)("mt-1 w-8 h-8 flex items-center justify-center rounded-full text-lg font-semibold",(0,l.c)(e)&&"bg-primary text-primary-foreground"),children:(0,d.GP)(e,"d")})]},e.toString()))}),(0,a.jsx)("div",{ref:N,className:"overflow-y-auto h-full",children:(0,a.jsxs)("div",{className:"grid grid-cols-5 relative min-h-full",children:[j.map((e,t)=>{let r=Array.from({length:18});return(0,a.jsx)("div",{className:"relative border-l",children:r.map((r,n)=>{let l=7+Math.floor(n/2),o=n%2*30,s=(0,f.h)(e,{hours:l,minutes:o,seconds:0,milliseconds:0});return(0,a.jsx)("div",{onClick:()=>null==g?void 0:g(s),className:(0,p.cn)("border-b border-border/70 hover:bg-accent transition-colors",g&&"cursor-pointer",0===o&&"border-dashed"),style:{height:"".concat(30,"px")}},"".concat(t,"-").concat(l,"-").concat(o))})},"col-".concat(e.toString()))}),Array.from(E.entries()).map((e,t)=>{let[r,n]=e;return n.map(e=>{let r=new Date(e.startDate),n=new Date(e.endDate);if(!(0,u.f)(r)||!(0,u.f)(n))return null;let l=60*(0,o.q)(r)+(0,s.O)(r);if(60*(0,o.q)(n)+(0,s.O)(n)<420||l>=960)return null;let c=Math.max(0,l-420),i=Math.max(15,(0,m.o)(n,r)),f=e.color?{borderColor:e.color,backgroundColor:"".concat(e.color,"33")}:{};return(0,a.jsxs)("div",{onClick:()=>null==b?void 0:b(e),className:(0,p.cn)("absolute p-2 rounded-md transition-all shadow-sm overflow-hidden z-[5]",v(e),b&&"cursor-pointer hover:shadow-md",e.isAllDay&&"opacity-90"),style:{top:"".concat(c/60*60,"px"),height:"".concat(i/60*60-2,"px"),left:"calc(".concat(20*t,"% + 4px)"),width:"calc(20% - 8px)",...f},title:"".concat(e.title).concat(e.isAllDay?" (All-day)":" - ".concat((0,d.GP)(r,"h:mm a"))),children:[(0,a.jsx)("p",{className:"font-semibold text-xs truncate",children:e.title}),!e.isAllDay&&(0,a.jsxs)("p",{className:"text-[10px] opacity-80",children:[(0,d.GP)(r,"h:mm a")," - ",(0,d.GP)(n,"h:mm a")]}),w&&e.ownerName&&(0,a.jsxs)("div",{className:"flex items-center text-[10px] opacity-90 font-medium mt-1",children:[(0,a.jsx)(h.A,{className:"w-2.5 h-2.5 mr-1"})," ",e.ownerName]})]},e.id)})}),(0,a.jsx)(y,{dayColumns:j})]})})]})]})})}},17759:(e,t,r)=>{r.d(t,{C5:()=>v,MJ:()=>x,eI:()=>p,lR:()=>h,lV:()=>i,zB:()=>u});var a=r(95155),n=r(12115),l=r(99708),o=r(62177),s=r(59434),c=r(85057);let i=o.Op,d=n.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(d.Provider,{value:{name:t.name},children:(0,a.jsx)(o.xI,{...t})})},f=()=>{let e=n.useContext(d),t=n.useContext(m),{getFieldState:r,formState:a}=(0,o.xW)(),l=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:s}=t;return{id:s,name:e.name,formItemId:"".concat(s,"-form-item"),formDescriptionId:"".concat(s,"-form-item-description"),formMessageId:"".concat(s,"-form-item-message"),...l}},m=n.createContext({}),p=n.forwardRef((e,t)=>{let{className:r,...l}=e,o=n.useId();return(0,a.jsx)(m.Provider,{value:{id:o},children:(0,a.jsx)("div",{ref:t,className:(0,s.cn)("space-y-2",r),...l})})});p.displayName="FormItem";let h=n.forwardRef((e,t)=>{let{className:r,...n}=e,{error:l,formItemId:o}=f();return(0,a.jsx)(c.J,{ref:t,className:(0,s.cn)(l&&"text-destructive",r),htmlFor:o,...n})});h.displayName="FormLabel";let x=n.forwardRef((e,t)=>{let{...r}=e,{error:n,formItemId:o,formDescriptionId:s,formMessageId:c}=f();return(0,a.jsx)(l.DX,{ref:t,id:o,"aria-describedby":n?"".concat(s," ").concat(c):"".concat(s),"aria-invalid":!!n,...r})});x.displayName="FormControl",n.forwardRef((e,t)=>{let{className:r,...n}=e,{formDescriptionId:l}=f();return(0,a.jsx)("p",{ref:t,id:l,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})}).displayName="FormDescription";let v=n.forwardRef((e,t)=>{var r;let{className:n,children:l,...o}=e,{error:c,formMessageId:i}=f(),d=c?String(null!=(r=null==c?void 0:c.message)?r:""):l;return d?(0,a.jsx)("p",{ref:t,id:i,className:(0,s.cn)("text-sm font-medium text-destructive",n),...o,children:d}):null});v.displayName="FormMessage"},47262:(e,t,r)=>{r.d(t,{S:()=>c});var a=r(95155),n=r(12115),l=r(76981),o=r(10518),s=r(59434);let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(l.bL,{ref:t,className:(0,s.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...n,children:(0,a.jsx)(l.C1,{className:(0,s.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})})});c.displayName=l.bL.displayName},88539:(e,t,r)=>{r.d(t,{T:()=>o});var a=r(95155),n=r(12115),l=r(59434);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});o.displayName="Textarea"},91950:(e,t,r)=>{r.d(t,{C3:()=>s,Hi:()=>a,PN:()=>n,Y$:()=>o,ci:()=>c,oe:()=>d,tk:()=>u,xJ:()=>i,y4:()=>l});let a=["To Do","In Progress","Blocked","Done","Overdue"],n=["Low","Medium","High","Urgent"],l=["None","Daily","Weekly","Monthly","Yearly"],o=["Available","Busy","Out of Office"],s="LabFlow",c=["MDL","SOP","IA","iDOC","oDOC","VALIDATION_PROJECT","VALIDATION_STEP"],i={"Hydra AA":["Mercury by EPA 245.1","Mercury by EPA 7471B & 7470A"],"Hydra II":["Mercury by EPA 245.1","Mercury by EPA 7471B & 7470A"],"PE Optima 5300V":["Metals by EPA 200.7"],"PE Optima 8300":["Metals by EPA 200.7"],"iCAP 7400 DUO":["Metals by EPA 200.7"],"PE Optima 7300V":["Metals by EPA 200.7"],"PE Elan 9000":["Metals by EPA 200.8"],"Agilent 7900":["Metals by EPA 200.8"],"PE NexION 300X":[],"PE NexION 300D":[]},d=Object.keys(i),u=(()=>{let e=[];for(let t=0;t<=16;t++)e.push("BOL50".concat(String(t).padStart(2,"0")));for(let t=18;t<=24;t++)e.push("BOL50".concat(String(t).padStart(2,"0")));for(let t=26;t<=28;t++)e.push("BOL50".concat(String(t).padStart(2,"0")));for(let t=0;t<=2;t++)e.push("BOL55".concat(String(t).padStart(2,"0")));return e})()}}]);