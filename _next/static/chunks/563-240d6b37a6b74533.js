"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[563],{30645:(e,t,a)=>{a.d(t,{b:()=>i});let r={maxAttempts:4,delayMs:1e3,shouldRetry:e=>!!e&&"object"==typeof e&&!(!0===e.isAbort||"string"==typeof e.message&&e.message.toLowerCase().includes("aborted"))&&!0!==e.isCircuitOpenError&&!0!==e.circuitJustOpened&&(0===e.status||502===e.status||503===e.status||504===e.status),context:"operation"};var o=function(e){return e.Closed="CLOSED",e.Open="OPEN",e.HalfOpen="HALF_OPEN",e}(o||{});let n=new Map;async function i(e,t){let a,o={...r,...t},i=o.context,s=(e,t)=>{let a="[withRetry:".concat(i,"] ").concat(e,". Circuit: ").concat(c.state,".");console.warn(a);let r=Error(a);throw r.isAbort=!0,r.context=i,t&&(r.originalError=t),r};n.has(i)||n.set(i,{state:"CLOSED",failures:0});let c=n.get(i);if("OPEN"===c.state)if(Date.now()<(c.openUntil||0)){let e=Error("Circuit for '".concat(i,"' is open due to repeated failures. Please try again in a few moments."));throw e.isCircuitOpenError=!0,e.context=i,e.openUntil=c.openUntil,e}else c.state="HALF_OPEN",c.failures=0,c.openUntil=void 0,console.log("[withRetry:".concat(i,"] Circuit is now HalfOpen. Allowing one attempt."));let l="HALF_OPEN"===c.state?1:o.maxAttempts;for(let t=1;t<=l;t++){var d,u,p;(null==(d=o.signal)?void 0:d.aborted)&&s("Aborted before attempt ".concat(t));try{let t=await e();return("HALF_OPEN"===c.state||c.failures>0||"OPEN"===c.state)&&(console.log("[withRetry:".concat(i,"] Circuit is now Closed due to successful attempt (was ").concat(c.state,").")),c.state="CLOSED",c.failures=0,c.openUntil=void 0),t}catch(e){if(a=e,(null==(u=o.signal)?void 0:u.aborted)&&s("Aborted during/after attempt ".concat(t," (caught error: ").concat((null==e?void 0:e.message)||e,")"),e),e&&"object"==typeof e&&(!0===e.isAbort||"string"==typeof e.message&&e.message.toLowerCase().includes("aborted")))throw console.warn("[withRetry:".concat(i,"] Caught abort-like error on attempt ").concat(t,": ").concat(e.message,". Circuit: ").concat(c.state,".")),e.isAbort||(e.isAbort=!0),e.context||(e.context=i),e;if(o.shouldRetry(e))if(o.onRetry&&o.onRetry(t,l,e),t<l){let e="HALF_OPEN"===c.state?o.delayMs:o.delayMs*Math.pow(2,t-1);await new Promise(t=>setTimeout(t,e)),(null==(p=o.signal)?void 0:p.aborted)&&s("Aborted during retry delay after attempt ".concat(t))}else throw console.warn("[withRetry:".concat(i,"] All ").concat(l," attempts failed (Circuit: ").concat(c.state,"). Last error: ").concat(e.message||JSON.stringify(e))),"HALF_OPEN"===c.state?(console.warn("[withRetry:".concat(i,"] Circuit failed in HalfOpen state. Re-opening.")),c.state="OPEN",c.openUntil=Date.now()+3e4,a.circuitJustOpened=!0,a.context=i):"CLOSED"===c.state&&(c.failures++,console.log("[withRetry:".concat(i,"] Circuit failure count: ").concat(c.failures," (max: ").concat(1,")")),c.failures>=1&&(console.warn("[withRetry:".concat(i,"] Circuit reached max failures. Opening circuit.")),c.state="OPEN",c.openUntil=Date.now()+3e4,a.circuitJustOpened=!0,a.context=i)),a;else throw e}}if(a)throw a;throw Error("[withRetry:".concat(i,"] Unexpected exit: Max attempts ").concat(l," reached without success or explicit error handling."))}},66695:(e,t,a)=>{a.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>c,Zp:()=>i,aR:()=>s});var r=a(95155),o=a(12115),n=a(59434);let i=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...o})});i.displayName="Card";let s=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...o})});s.displayName="CardHeader";let c=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-xl md:text-2xl font-semibold leading-none tracking-tight",a),...o})});c.displayName="CardTitle";let l=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...o})});l.displayName="CardDescription";let d=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...o})});d.displayName="CardContent",o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...o})}).displayName="CardFooter"},73835:(e,t,a)=>{a.d(t,{w:()=>c});var r=a(70831),o=a(96019),n=a(78039),i=a(86622),s=a(63482);function c(e,t){let a=[];return e.forEach(e=>{if(a.push(e),"None"===e.recurrence||!e.dueDate)return;let c=new Date(e.dueDate),l=e.startDate?new Date(e.dueDate).getTime()-new Date(e.startDate).getTime():0,d=1;for(;;){let u=new Date(c);switch(e.recurrence){case"Daily":c=(0,r.f)(u,1);break;case"Weekly":c=(0,o.J)(u,1);break;case"Monthly":c=(0,n.P)(u,1);break;case"Yearly":c=(0,i.e)(u,1);break;default:return}if((0,s.Y)(c,t)){let t=e.startDate?new Date(c.getTime()-l):void 0,r={...e,id:"".concat(e.id,"_proj_").concat(d),dueDate:c,startDate:t,status:"To Do",progress:0,attachments:[],description:"Recurring instance of: ".concat(e.title,". Original due date: ").concat(new Date(e.dueDate).toLocaleDateString())};a.push(r),d++}else break}}),a}},77694:(e,t,a)=>{a.d(t,{UT:()=>d,lC:()=>u,vq:()=>p,x1:()=>l});var r=a(7140),o=a(30645),n=a(73835);a(97841);let i="tasks",s=(e,t)=>{if(e instanceof r.fp){var a;if(404===e.status)throw Error("Cannot create item: The '".concat(t,"' collection does not exist. Please create it in your PocketBase admin panel."));if(400===e.status&&(null==(a=e.data)?void 0:a.data)){if(e.data.data.id&&e.data.data.id.message)throw Error("There seems to be a configuration issue with your '".concat(t,"' collection. The server is asking for an 'id', which should be automatically generated. Please check in your PocketBase admin panel that the 'id' field is the default system field and not a required text field you created."));let a=Object.entries(e.data.data).map(e=>{let[t,a]=e;return"".concat(t,": ").concat(a.message)}).join("; ");throw Error("Validation failed. Server says: ".concat(a))}}throw console.error("Failed to create item in ".concat(t,":"),e),e},c=e=>({id:e.id,title:e.title||"",task_type:e.task_type,description:e.description,status:e.status,priority:e.priority,startDate:e.startDate?new Date(e.startDate):void 0,dueDate:e.dueDate?new Date(e.dueDate):void 0,assignedTo_text:e.assignedTo_text,recurrence:e.recurrence||"None",attachments:e.attachments,userId:e.userId,created:new Date(e.created),updated:new Date(e.updated),collectionId:e.collectionId,collectionName:e.collectionName,expand:e.expand,progress:e.progress,isMilestone:"boolean"==typeof e.isMilestone&&e.isMilestone,dependencies:Array.isArray(e.dependencies)?e.dependencies:"string"==typeof e.dependencies&&e.dependencies.startsWith("[")?JSON.parse(e.dependencies):[],instrument_subtype:e.instrument_subtype||void 0,method:e.method||void 0}),l=async(e,t)=>{try{let{onRetry:a,signal:r,projectionHorizon:s,...l}=t||{},d={sort:"-created",fields:"id,title,task_type,status,priority,startDate,dueDate,assignedTo_text,userId,created,updated,progress,isMilestone,dependencies,instrument_subtype,method,recurrence",...l},u=(await (0,o.b)(()=>e.collection(i).getFullList(d,{signal:r}),{signal:r,context:"fetching tasks list",onRetry:a})).map(c);if(s)return(0,n.w)(u,s);return u}catch(e){throw e}},d=async(e,t,a)=>{try{t.has("isMilestone")&&t.set("isMilestone","true"===t.get("isMilestone")?"true":"false");let r=await e.collection(i).create(t,{signal:null==a?void 0:a.signal});return c(r)}catch(e){throw s(e,i),e}},u=async(e,t,a,r)=>{try{let{signal:n}=r||{};a instanceof FormData&&a.has("isMilestone")?a.set("isMilestone","true"===a.get("isMilestone")||!0===a.get("isMilestone")?"true":"false"):!(a instanceof FormData)&&a.hasOwnProperty("isMilestone")&&(a.isMilestone=!!a.isMilestone);let s=await (0,o.b)(()=>e.collection(i).update(t,a,{signal:n}),{context:"updating task ".concat(t),signal:n});return c(s)}catch(e){throw console.error("Failed to update task ".concat(t,":"),e),e}},p=async(e,t,a)=>{try{let{signal:r}=a||{};await (0,o.b)(()=>e.collection(i).delete(t,{signal:r}),{context:"deleting task ".concat(t),signal:r})}catch(e){throw console.error("Failed to delete task ".concat(t,":"),e),e}}},97841:(e,t,a)=>{a.d(t,{Oc:()=>c,Qu:()=>u,Y$:()=>d,bV:()=>l});var r=a(7140),o=a(30645);let n="employees",i=(e,t)=>{if(e instanceof r.fp){var a;if(404===e.status)throw Error("Cannot create item: The '".concat(t,"' collection does not exist. Please create it in your PocketBase admin panel."));if(400===e.status&&(null==(a=e.data)?void 0:a.data)){if(e.data.data.id&&e.data.data.id.message)throw Error("There seems to be a configuration issue with your '".concat(t,"' collection. The server is asking for an 'id', which should be automatically generated. Please check in your PocketBase admin panel that the 'id' field is the default system field and not a required text field you created."));let a=Object.entries(e.data.data).map(e=>{let[t,a]=e;return"".concat(t,": ").concat(a.message)}).join("; ");throw Error("Validation failed. Server says: ".concat(a))}}throw console.error("Failed to create item in ".concat(t,":"),e),e},s=e=>({id:e.id,name:e.name,email:e.email,role:e.role,reportsTo_text:e.reportsTo_text,department_text:e.department_text,userId:e.userId,created:e.created?new Date(e.created):void 0,updated:e.updated?new Date(e.updated):void 0,collectionId:e.collectionId,collectionName:e.collectionName,expand:e.expand}),c=async(e,t)=>{try{let{onRetry:a,signal:r,...i}=t||{},c={sort:"name",fields:"id,name,email,role,department_text,reportsTo_text,userId,created,updated",...i};return(await (0,o.b)(()=>e.collection(n).getFullList(c,{signal:r}),{signal:r,context:"fetching employees list",onRetry:a})).map(s)}catch(e){throw e}},l=async(e,t,a)=>{try{let r=await e.collection(n).create(t,{signal:null==a?void 0:a.signal});return s(r)}catch(e){throw i(e,n),e}},d=async(e,t,a,r)=>{try{let{signal:i}=r||{},c=await (0,o.b)(()=>e.collection(n).update(t,a,{signal:i}),{context:"updating employee ".concat(t),signal:i});return s(c)}catch(e){throw console.error("Failed to update employee ".concat(t,":"),e),e}},u=async(e,t,a)=>{try{let{signal:r}=a||{};await (0,o.b)(()=>e.collection(n).delete(t,{signal:r}),{context:"deleting employee ".concat(t),signal:r})}catch(e){throw console.error("Failed to delete employee ".concat(t,":"),e),e}}}}]);